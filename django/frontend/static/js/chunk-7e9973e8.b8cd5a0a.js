(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e9973e8"],{"74c6":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.s?r("v-container",[r("v-layout",{attrs:{"text-center":"",wrap:""}},[r("v-card",[r("v-card-title",{domProps:{textContent:t._s(t.s.name)}}),r("v-card-text",[r("p",{domProps:{textContent:t._s(t.s.description)}}),r("seriesSummary")],1)],1)],1)],1):r("v-overlay",[r("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},s=[],n=r("5530"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-card",[r("v-card-title",[r("small",[t._v("Summary Table")]),r("v-spacer"),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.s_search,callback:function(e){t.s_search=e},expression:"s_search"}})],1),r("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.s_table_header,items:t.s_table,search:t.s_search,loading:t.loading,"group-by":"class","multi-sort":"","items-per-page":50}})],1)},u=[],c=(r("99af"),r("4de4"),r("7db0"),r("c740"),r("d81d"),r("13d5"),r("b0c0"),r("4ec9"),r("d3b7"),r("ac1f"),r("25f0"),r("3ca3"),r("841c"),r("ddb0"),r("2909")),o=r("b85c"),l=r("a676"),f=r("2f62"),p={components:{},data:function(){return{s_search:""}},computed:Object(n["a"])(Object(n["a"])({},Object(f["c"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))},loading:function(){if(this.s_table.length)return!1;if(this.s){var t,e=Object(o["a"])(this.s.stages);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(Array.isArray(r.participants))return!1}}catch(a){e.e(a)}finally{e.f()}}return!0},s_table_header:function(){if(this.s){var t=[{text:"Class",value:"class"},{text:"Place",value:"place",width:"1%"},{text:"Name",value:"name"},{text:"Club",value:"club"},{text:"Points",value:"points"},{text:"Sum",value:"sum"}];return t.push.apply(t,Object(c["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},s_table:function(){var t=this;if(this.s){var e,r=[],a=Object(o["a"])(this.s.stages);try{var s=function(){var a=e.value;if(!Array.isArray(a.participants))return"continue";var s=a.participants.map((function(t){var e,r,s=a.rounds.find((function(t){return-1!==t.course_name.search("shootoff")}));return s=s?s.id:null,{name:t.archer.full_name,class:t.age_group+t.archer.gender+t.style,id:t.archer.id+t.age_group+t.style,club:t.archer.club,sum:l["a"].sum((e=[]).concat.apply(e,Object(c["a"])(t.scorecards.filter((function(t){return t.round!==s})).map((function(t){return Object(c["a"])(t.arrows.map((function(t){return t.score})))}))))),x:l["a"].sum((r=[]).concat.apply(r,Object(c["a"])(t.scorecards.filter((function(t){return t.round!==s})).map((function(t){return Object(c["a"])(t.arrows.map((function(t){return t.x})))}))))),shootoff:s?l["a"].sum.apply(l["a"],Object(c["a"])(t.scorecards.filter((function(t){return t.round===s})).map((function(t){return Object(c["a"])(t.arrows.map((function(t){return t.score})))})))):null}}));l["a"].participantRank(s);var n,i=s.reduce((function(t,e){return t.set(e.class,(t.get(e.class)||0)+1)}),new Map),u={class:null,points:null},f=Object(o["a"])(s.filter((function(t){return t.sum>0})));try{var p=function(){var e=n.value;if(e.class!==u.class&&(u.class=e.class,u.points=Math.min(t.s.points_max,i.get(e.class))),e.points=u.points>=e.place&&e.sum>0?u.points-e.place+1:null,e.points){var s=r.findIndex((function(t){return t.id===e.id}));-1===s?(r.push({id:e.id,class:e.class,name:e.name,club:e.club,sum:e.sum,points:e.points}),r[r.length-1]["stage"+a.id.toString()]=e.points.toString()+" ("+e.sum.toString()+")"):(r[s].sum+=e.sum,r[s].points+=e.points,r[s]["stage"+a.id.toString()]=e.points.toString()+" ("+e.sum.toString()+")")}};for(f.s();!(n=f.n()).done;)p()}catch(d){f.e(d)}finally{f.f()}};for(a.s();!(e=a.n()).done;)s()}catch(n){a.e(n)}finally{a.f()}return r.sort((function(t,e){return t.points<e.points?1:t.points>e.points?-1:t.sum<e.sum?1:t.sum>e.sum?-1:0}))}return[]}}),methods:{}},d=p,m=r("2877"),h=r("6544"),v=r.n(h),b=r("b0af"),g=r("99d9"),x=r("8fea"),y=r("2fa4"),_=r("8654"),O=Object(m["a"])(d,i,u,!1,null,null,null),j=O.exports;v()(O,{VCard:b["a"],VCardTitle:g["d"],VDataTable:x["a"],VSpacer:y["a"],VTextField:_["a"]});var S={components:{seriesSummary:j},data:function(){return{}},computed:Object(n["a"])(Object(n["a"])({},Object(f["c"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))}}),created:function(){var t=this;this.$store.dispatch("series/updateSeries",parseInt(this.$route.params.id)).catch((function(){t.$router.push("/series")}))}},w=S,V=(r("8278"),r("a523")),C=r("a722"),$=r("a797"),k=r("490a"),A=Object(m["a"])(w,a,s,!1,null,null,null);e["default"]=A.exports;v()(A,{VCard:b["a"],VCardText:g["c"],VCardTitle:g["d"],VContainer:V["a"],VLayout:C["a"],VOverlay:$["a"],VProgressCircular:k["a"]})},"80a2":function(t,e,r){},8278:function(t,e,r){"use strict";var a=r("80a2"),s=r.n(a);s.a},a676:function(t,e,r){"use strict";r("13d5");var a=r("b85c");e["a"]={sum:function(t){return Array.isArray(t)&&t.length?t.reduce((function(t,e){return t+e})):null},participantOrder:function(t,e){if(t.class<e.class)return-1;if(t.class>e.class)return 1;if(t.sum>e.sum)return-1;if(t.sum<e.sum)return 1;if(t.shootoff&&e.shootoff){if(t.shootoff>e.shootoff)return-1;if(t.shootoff<e.shootoff)return 1}else{if(t.x>e.x)return-1;if(t.x<e.x)return 1}return 0},participantRank:function(t){var e,r={class:null,ord:1,sum:null,x:null},s=Object(a["a"])(t.sort(this.participantOrder));try{for(s.s();!(e=s.n()).done;){var n=e.value;n.class!==r.class&&(r.class=n.class,r.ord=1,r.place=1,r.sum=n.sum,r.x=n.x),(n.sum<r.sum||n.shootoff||n.x<r.x&&r.ord>3)&&(r.place=r.ord),n["place"]=r.place,r.x=n.x,r.sum=n.sum,r.ord+=1}}catch(i){s.e(i)}finally{s.f()}}}}}]);
//# sourceMappingURL=chunk-7e9973e8.b8cd5a0a.js.map