(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ccd90a2"],{"74c6":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.s?a("v-container",[a("v-layout",{attrs:{"text-center":"",wrap:""}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.s.name)}}),a("v-card-text",[a("p",{domProps:{textContent:t._s(t.s.description)}})]),a("seriesSummary")],1)],1)],1):a("v-overlay",[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},n=[],r=a("5530"),i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("v-sheet",[a("v-card",{staticClass:"mb-5"},[a("v-card-title",[a("small",[t._v("Archers Summary")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.s_search,callback:function(s){t.s_search=s},expression:"s_search"}})],1),a("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.s_table_header,items:t.s_table,search:t.s_search,loading:t.loading,"group-by":"class","multi-sort":"","items-per-page":50}})],1),t.s.club_ranking?a("v-card",[a("v-card-title",[a("small",[t._v("Clubs Summary")]),a("v-spacer")],1),a("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.c_table_header,items:t.c_table,loading:t.loading,"multi-sort":"","items-per-page":15}})],1):t._e()],1)},c=[],u=(a("99af"),a("4de4"),a("7db0"),a("c740"),a("c975"),a("d81d"),a("13d5"),a("fb6a"),a("a434"),a("b0c0"),a("4ec9"),a("d3b7"),a("07ac"),a("ac1f"),a("25f0"),a("3ca3"),a("1276"),a("ddb0"),a("2909")),l=a("b85c"),o=a("a676"),p=a("2f62"),f={components:{},data:function(){return{s_search:""}},computed:Object(r["a"])(Object(r["a"])({},Object(p["d"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))},loading:function(){if(this.s_table.length)return!1;if(this.s){var t,s=Object(l["a"])(this.s.stages);try{for(s.s();!(t=s.n()).done;){var a=t.value;if(Array.isArray(a.participants))return!1}}catch(e){s.e(e)}finally{s.f()}}return!0},s_table_header:function(){if(this.s){var t=[{text:"Class",value:"class"},{text:"Place",value:"place",width:"1%"},{text:"Name",value:"name",width:"148px"},{text:"Club",value:"club"},{text:"Points",value:"points"},{text:"Sum",value:"sum"}];return t.push.apply(t,Object(u["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},c_table_header:function(){if(this.s_table&&this.s.club_ranking){var t=[{text:"Place",value:"place",width:"1%"},{text:"Club",value:"club"},{text:"Points",value:"points"}];return t.push.apply(t,Object(u["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},s_table:function(){var t=this;if(this.s){var s,a=[],e=Object(l["a"])(this.s.stages);try{var n=function(){var e=s.value;if(!Array.isArray(e.participants))return"continue";var n=e.participants.map((function(s){var a,n,r=e.rounds.find((function(t){return"s"===t.course_type}));return r=r?r.id:null,{name:s.archer.full_name,class:o["a"].getClass(s,t.s.ignore_gender),id:s.archer.id+s.age_group+s.style,club:s.archer.club,sum:o["a"].sum((a=[]).concat.apply(a,Object(u["a"])(s.scorecards.filter((function(t){return t.round!==r})).map((function(t){return Object(u["a"])(t.arrows.map((function(t){return t.score})))}))))),x:o["a"].sum((n=[]).concat.apply(n,Object(u["a"])(s.scorecards.filter((function(t){return t.round!==r})).map((function(t){return Object(u["a"])(t.arrows.map((function(t){return t.x})))}))))),shootoff:r?o["a"].sum.apply(o["a"],Object(u["a"])(s.scorecards.filter((function(t){return t.round===r})).map((function(t){return Object(u["a"])(t.arrows.map((function(t){return t.score})))})))):null}}));o["a"].participantRank(n);var r,i=n.reduce((function(t,s){return t.set(s.class,(t.get(s.class)||0)+1)}),new Map),c={class:null,points:null},p=Object(l["a"])(n.filter((function(t){return t.sum>0})));try{var f=function(){var s=r.value;s.class!==c.class&&(c.class=s.class,c.points=Math.min(t.s.points_max,i.get(s.class))),s.points=c.points>=s.place&&s.sum>0?c.points-s.place+1:0;var n=a.findIndex((function(t){return t.id===s.id}));-1===n?(a.push({id:s.id,class:s.class,name:s.name,club:s.club,sum:[s.sum],points:[s.points]}),a[a.length-1]["stage"+e.id.toString()]=(s.points>0?s.points:"-")+" ("+s.sum+")"):(a[n].sum.push(s.sum),a[n].points.push(s.points),a[n]["stage"+e.id.toString()]=(s.points>0?s.points:"-")+" ("+s.sum+")")};for(p.s();!(r=p.n()).done;)f()}catch(d){p.e(d)}finally{p.f()}};for(e.s();!(s=e.n()).done;)n()}catch(p){e.e(p)}finally{e.f()}for(var r=function(){var s=c[i];s.sum.sort((function(t,a){return s.points[s.sum.indexOf(a)]-s.points[s.sum.indexOf(t)]})),s.points.sort((function(t,s){return s-t})),s.points.length>=t.s.participant_min&&(s.place=null),s.points.length>=t.s.participant_max?(s.points=o["a"].sum(s.points.slice(0,t.s.participant_max)),s.sum=o["a"].sum(s.sum.slice(0,t.s.participant_max))):(s.points=o["a"].sum(s.points),s.sum=o["a"].sum(s.sum))},i=0,c=a;i<c.length;i++)r();return a.sort((function(t,s){return t.class<s.class?-1:t.class>s.class||t.points<s.points?1:t.points>s.points?-1:t.sum<s.sum?1:t.sum>s.sum?-1:0})).map((function(s){return s.class!==t.class&&(t.class=s.class,t.ord=1,t.place=1,t.points=s.points,t.sum=s.sum),null===s.place&&s.points>0&&((s.points<t.points||s.sum<t.sum)&&(t.place=t.ord),s.place=t.place,t.ord+=1,t.sum=s.sum,t.points=s.points),0===s.points&&(s.points="-"),s}),{class:null,place:1,ord:1,sum:null,points:null}).sort((function(t,s){return t.class<s.class?-1:t.class>s.class||(t.place||9999)>(s.place||9999)?1:(t.place||9999)<(s.place||9999)?-1:0}))}return[]},c_table:function(){var t=this;if(this.s_table.length&&this.s.club_ranking){var s,a=[],e=Object(l["a"])(this.s.stages);try{for(e.s();!(s=e.n()).done;){var n,r=s.value,i="stage"+r.id.toString(),c={},u=Object(l["a"])(this.s_table);try{for(u.s();!(n=u.n()).done;){var p=n.value;if(p[i]){p.class in c||(c[p.class]={}),p.club in c[p.class]||(c[p.class][p.club]=[]);var f=parseInt(p[i].split(" ")[0])||0;c[p.class][p.club].push(f)}}}catch(g){u.e(g)}finally{u.f()}for(var d=0,m=Object.values(c);d<m.length;d++){var h=m[d],b=function(s){var e=0;e=h[s].length>t.s.club_ranking_max?o["a"].sum(h[s].sort((function(t,s){return s-t})).splice(0,t.s.club_ranking_max)):o["a"].sum(h[s]);var n=a.findIndex((function(t){return t.club===s}));-1===n?(a.push({club:s,place:null,points:e}),a[a.length-1][i]=e):(i in a[n]?a[n][i]+=e:a[n][i]=e,a[n].points+=e)};for(var v in h)b(v)}}}catch(g){e.e(g)}finally{e.f()}return a.sort((function(t,s){return t.points>s.points?-1:t.points<s.points?1:0})).map((function(s){return s.points<t.points&&(t.place=t.ord),s.place=t.place,t.points=s.points,t.ord+=1,s}),{place:1,ord:1,points:null})}return[]}}),methods:{}},d=f,m=a("2877"),h=a("6544"),b=a.n(h),v=a("b0af"),g=a("99d9"),_=a("8fea"),x=a("8dd9"),y=a("2fa4"),O=a("8654"),j=Object(m["a"])(d,i,c,!1,null,null,null),C=j.exports;b()(j,{VCard:v["a"],VCardTitle:g["d"],VDataTable:_["a"],VSheet:x["a"],VSpacer:y["a"],VTextField:O["a"]});var w={components:{seriesSummary:C},data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(p["d"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))}}),created:function(){var t=this;this.$store.dispatch("series/updateSeries",parseInt(this.$route.params.id)).catch((function(){t.$router.push("/series")}))}},S=w,k=(a("8278"),a("a523")),V=a("a722"),$=a("a797"),I=a("490a"),A=Object(m["a"])(S,e,n,!1,null,null,null);s["default"]=A.exports;b()(A,{VCard:v["a"],VCardText:g["c"],VCardTitle:g["d"],VContainer:k["a"],VLayout:V["a"],VOverlay:$["a"],VProgressCircular:I["a"]})},8278:function(t,s,a){"use strict";var e=a("8b40"),n=a.n(e);n.a},"8b40":function(t,s,a){},a676:function(t,s,a){"use strict";a("99af"),a("4de4"),a("caad"),a("d81d"),a("13d5"),a("2532");var e=a("b85c"),n=a("2909");s["a"]={sum:function(t){return Array.isArray(t)&&t.length?t.reduce((function(t,s){return t+s})):null},participantScore:function(t,s){var a;return this.sum((a=[]).concat.apply(a,Object(n["a"])(t.scorecards.filter((function(t){return t.round!==s})).map((function(t){return Object(n["a"])(t.arrows.map((function(t){return t.score})))})))))},participantOrder:function(t,s){if(t.class<s.class)return-1;if(t.class>s.class)return 1;if(null!==t.shootoff&&null!==s.shootoff){if(t.shootoff>s.shootoff)return-1;if(t.shootoff<s.shootoff)return 1}return t.sum>s.sum?-1:t.sum<s.sum?1:t.x>s.x?-1:t.x<s.x?1:0},participantRank:function(t){var s,a={class:null,ord:1,sum:null,x:null},n=Object(e["a"])(t.sort(this.participantOrder));try{for(n.s();!(s=n.n()).done;){var r=s.value;r.class!==a.class&&(a.class=r.class,a.ord=1,a.place=1,a.sum=r.sum,a.x=r.x),("undefined"!==typeof r.shootoff&&null!==r.shootoff||r.sum<a.sum||r.x<a.x&&a.ord>3)&&(a.place=a.ord),r["place"]=a.place,a.x=r.x,a.sum=r.sum,a.ord+=1}}catch(i){n.e(i)}finally{n.f()}},getClass:function(t,s){return s&&s.includes(t.age_group+"_"+t.style)?t.age_group+"_"+t.style:t.age_group+t.archer.gender+t.style}}}}]);
//# sourceMappingURL=chunk-3ccd90a2.e6f83b42.js.map