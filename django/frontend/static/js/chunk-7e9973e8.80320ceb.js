(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e9973e8"],{"74c6":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.s?e("v-container",[e("v-layout",{attrs:{"text-center":"",wrap:""}},[e("v-card",[e("v-card-title",{domProps:{textContent:t._s(t.s.name)}}),e("v-card-text",[e("p",{domProps:{textContent:t._s(t.s.description)}})]),e("seriesSummary")],1)],1)],1):e("v-overlay",[e("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},n=[],r=e("5530"),i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("v-sheet",[e("v-card",{staticClass:"mb-5"},[e("v-card-title",[e("small",[t._v("Archers Summary")]),e("v-spacer"),e("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.s_search,callback:function(s){t.s_search=s},expression:"s_search"}})],1),e("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.s_table_header,items:t.s_table,search:t.s_search,loading:t.loading,"group-by":"class","multi-sort":"","items-per-page":50}})],1),t.s.club_ranking?e("v-card",[e("v-card-title",[e("small",[t._v("Clubs Summary")]),e("v-spacer")],1),e("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.c_table_header,items:t.c_table,loading:t.loading,"multi-sort":"","items-per-page":15}})],1):t._e()],1)},c=[],u=(e("99af"),e("4de4"),e("7db0"),e("c740"),e("c975"),e("d81d"),e("13d5"),e("fb6a"),e("b0c0"),e("4ec9"),e("d3b7"),e("ac1f"),e("25f0"),e("3ca3"),e("841c"),e("1276"),e("ddb0"),e("2909")),l=e("b85c"),o=e("a676"),p=e("2f62"),f={components:{},data:function(){return{s_search:""}},computed:Object(r["a"])(Object(r["a"])({},Object(p["d"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))},loading:function(){if(this.s_table.length)return!1;if(this.s){var t,s=Object(l["a"])(this.s.stages);try{for(s.s();!(t=s.n()).done;){var e=t.value;if(Array.isArray(e.participants))return!1}}catch(a){s.e(a)}finally{s.f()}}return!0},s_table_header:function(){if(this.s){var t=[{text:"Class",value:"class"},{text:"Place",value:"place",width:"1%"},{text:"Name",value:"name",width:"148px"},{text:"Club",value:"club"},{text:"Points",value:"points"},{text:"Sum",value:"sum"}];return t.push.apply(t,Object(u["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},c_table_header:function(){if(this.s_table&&this.s.club_ranking){var t=[{text:"Place",value:"place",width:"1%"},{text:"Club",value:"club"},{text:"Points",value:"points"}];return t.push.apply(t,Object(u["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},s_table:function(){var t=this;if(this.s){var s,e=[],a=Object(l["a"])(this.s.stages);try{var n=function(){var a=s.value;if(!Array.isArray(a.participants))return"continue";var n=a.participants.map((function(t){var s,e,n=a.rounds.find((function(t){return-1!==t.course_name.search("shootoff")}));return n=n?n.id:null,{name:t.archer.full_name,class:t.age_group+t.archer.gender+t.style,id:t.archer.id+t.age_group+t.style,club:t.archer.club,sum:o["a"].sum((s=[]).concat.apply(s,Object(u["a"])(t.scorecards.filter((function(t){return t.round!==n})).map((function(t){return Object(u["a"])(t.arrows.map((function(t){return t.score})))}))))),x:o["a"].sum((e=[]).concat.apply(e,Object(u["a"])(t.scorecards.filter((function(t){return t.round!==n})).map((function(t){return Object(u["a"])(t.arrows.map((function(t){return t.x})))}))))),shootoff:n?o["a"].sum.apply(o["a"],Object(u["a"])(t.scorecards.filter((function(t){return t.round===n})).map((function(t){return Object(u["a"])(t.arrows.map((function(t){return t.score})))})))):null}}));o["a"].participantRank(n);var r,i=n.reduce((function(t,s){return t.set(s.class,(t.get(s.class)||0)+1)}),new Map),c={class:null,points:null},p=Object(l["a"])(n.filter((function(t){return t.sum>0})));try{var f=function(){var s=r.value;s.class!==c.class&&(c.class=s.class,c.points=Math.min(t.s.points_max,i.get(s.class))),s.points=c.points>=s.place&&s.sum>0?c.points-s.place+1:0;var n=e.findIndex((function(t){return t.id===s.id}));-1===n?(e.push({id:s.id,class:s.class,name:s.name,club:s.club,sum:[s.sum],points:[s.points]}),e[e.length-1]["stage"+a.id.toString()]=(s.points>0?s.points:"-")+" ("+s.sum+")"):(e[n].sum.push(s.sum),e[n].points.push(s.points),e[n]["stage"+a.id.toString()]=(s.points>0?s.points:"-")+" ("+s.sum+")")};for(p.s();!(r=p.n()).done;)f()}catch(d){p.e(d)}finally{p.f()}};for(a.s();!(s=a.n()).done;)n()}catch(p){a.e(p)}finally{a.f()}for(var r=function(){var s=c[i];s.sum.sort((function(t,e){return s.points[s.sum.indexOf(e)]-s.points[s.sum.indexOf(t)]})),s.points.sort((function(t,s){return s-t})),s.points.length>=t.s.participant_min&&(s.place=null),s.points.length>=t.s.participant_max?(s.points=o["a"].sum(s.points.slice(0,t.s.participant_max)),s.sum=o["a"].sum(s.sum.slice(0,t.s.participant_max))):(s.points=o["a"].sum(s.points),s.sum=o["a"].sum(s.sum))},i=0,c=e;i<c.length;i++)r();return e.sort((function(t,s){return t.class<s.class?-1:t.class>s.class||t.points<s.points?1:t.points>s.points?-1:t.sum<s.sum?1:t.sum>s.sum?-1:0})).map((function(s){return s.class!==t.class&&(t.class=s.class,t.ord=1,t.place=1,t.points=s.points,t.sum=s.sum),null===s.place&&s.points>0&&((s.points<t.points||s.sum<t.sum)&&(t.place=t.ord),s.place=t.place,t.ord+=1,t.sum=s.sum,t.points=s.points),0===s.points&&(s.points="-"),s}),{class:null,place:1,ord:1,sum:null,points:null}).sort((function(t,s){return t.class<s.class?-1:t.class>s.class||(t.place||9999)>(s.place||9999)?1:(t.place||9999)<(s.place||9999)?-1:0}))}return[]},c_table:function(){var t=this;if(this.s_table.length&&this.s.club_ranking){var s,e=[],a=Object(l["a"])(this.s.stages);try{for(a.s();!(s=a.n()).done;){var n,r=s.value,i="stage"+r.id.toString(),c={class:null,counter:{}},u=Object(l["a"])(this.s_table);try{var o=function(){var s=n.value;if(s[i]){if(s.class!=c.class&&(c.class=s.class,c.counter={}),s.club in c.counter||(c.counter[s.club]=0),c.counter[s.club]<t.s.club_ranking_max){var a=parseInt(s[i].split(" ")[0])||0,r=e.findIndex((function(t){return t.club===s.club}));-1===r?(e.push({club:s.club,place:null,points:a}),e[e.length-1][i]=a):(i in e[r]?e[r][i]+=a:e[r][i]=a,e[r].points+=a)}c.counter[s.club]+=1}};for(u.s();!(n=u.n()).done;)o()}catch(p){u.e(p)}finally{u.f()}}}catch(p){a.e(p)}finally{a.f()}return e.sort((function(t,s){return t.points>s.points?-1:t.points<s.points?1:0})).map((function(s){return s.points<t.points&&(t.place=t.ord),s.place=t.place,t.points=s.points,t.ord+=1,s}),{place:1,ord:1,points:null})}return[]}}),methods:{}},d=f,m=e("2877"),h=e("6544"),b=e.n(h),v=e("b0af"),g=e("99d9"),x=e("8fea"),_=e("8dd9"),y=e("2fa4"),O=e("8654"),j=Object(m["a"])(d,i,c,!1,null,null,null),w=j.exports;b()(j,{VCard:v["a"],VCardTitle:g["d"],VDataTable:x["a"],VSheet:_["a"],VSpacer:y["a"],VTextField:O["a"]});var C={components:{seriesSummary:w},data:function(){return{}},computed:Object(r["a"])(Object(r["a"])({},Object(p["d"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))}}),created:function(){var t=this;this.$store.dispatch("series/updateSeries",parseInt(this.$route.params.id)).catch((function(){t.$router.push("/series")}))}},S=C,V=(e("8278"),e("a523")),k=e("a722"),$=e("a797"),I=e("490a"),A=Object(m["a"])(S,a,n,!1,null,null,null);s["default"]=A.exports;b()(A,{VCard:v["a"],VCardText:g["c"],VCardTitle:g["d"],VContainer:V["a"],VLayout:k["a"],VOverlay:$["a"],VProgressCircular:I["a"]})},"80a2":function(t,s,e){},8278:function(t,s,e){"use strict";var a=e("80a2"),n=e.n(a);n.a},a676:function(t,s,e){"use strict";e("13d5");var a=e("b85c");s["a"]={sum:function(t){return Array.isArray(t)&&t.length?t.reduce((function(t,s){return t+s})):null},participantOrder:function(t,s){if(t.class<s.class)return-1;if(t.class>s.class)return 1;if(t.sum>s.sum)return-1;if(t.sum<s.sum)return 1;if(t.shootoff&&s.shootoff){if(t.shootoff>s.shootoff)return-1;if(t.shootoff<s.shootoff)return 1}else{if(t.x>s.x)return-1;if(t.x<s.x)return 1}return 0},participantRank:function(t){var s,e={class:null,ord:1,sum:null,x:null},n=Object(a["a"])(t.sort(this.participantOrder));try{for(n.s();!(s=n.n()).done;){var r=s.value;r.class!==e.class&&(e.class=r.class,e.ord=1,e.place=1,e.sum=r.sum,e.x=r.x),(r.sum<e.sum||r.shootoff||r.x<e.x&&e.ord>3)&&(e.place=e.ord),r["place"]=e.place,e.x=r.x,e.sum=r.sum,e.ord+=1}}catch(i){n.e(i)}finally{n.f()}}}}}]);
//# sourceMappingURL=chunk-7e9973e8.80320ceb.js.map