(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-290e154b"],{"13b3":function(e,t,n){},"17b3":function(e,t,n){},"1bfb":function(e,t,n){},"2d65":function(e,t,n){},"2f0b":function(e,t,n){},"412c":function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("7db0"),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("13d5"),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_string_link__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("9911"),core_js_modules_es_string_link__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_string_link__WEBPACK_IMPORTED_MODULE_4__),_opt_Archery_archscorer_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("3835");function sum(e){return e.reduce((function(e,t){return e+t}))}function getScore(e,t){return t?e.arrows.filter((function(e){return e.end===t.id})).map((function(e){return e.score?e.score:0})):e.arrows.map((function(e){return e.score?e.score:0}))}__webpack_exports__["a"]={props:{event:Object,round:Object,end:Object,scorecards:Array,isActive:Boolean},data:function(){return{arrow_inc:0,currentFocus:null,snack:!1,snackText:"",snackColor:"info"}},watch:{isActive:function(e){var t=this;!0===e&&null===this.currentFocus&&this.$nextTick((function(){t.focus_first_empty()}))}},methods:{get_participant:function(e){if(this.event){var t=this.event.participants.find((function(t){return t.id===e}));if(t)return t}return{archer:{full_name:null}}},sc_eval:function sc_eval(arr,x){var scores_choices=eval(arr).map((function(e){return{text:e,value:e}}));return x&&scores_choices.unshift({text:"X",value:scores_choices[0].value}),scores_choices.push({text:"M",value:0}),scores_choices},enter_score:function(e){var t=this;if(this.currentFocus){var n=Object(_opt_Archery_archscorer_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_5__["a"])(this.currentFocus,2),r=n[0],i=n[1],s=this.scorecards.find((function(e){return e.id===r})).arrows.find((function(e){return e.id===i}));s.x="X"===e.text,s.score=e.value,s.loading="warning",this.$store.dispatch("events/putArrow",{scId:r,arrow:s}),this.$refs.arrow[this.arrow_inc].blur()}else this.arrow_inc=this.$refs.arrow.length+1;this.arrow_inc++,this.arrow_inc>=this.$refs.arrow.length+2?(this.snackText="Focus on arrow you want to update or go to next end!",this.snack=!0):this.arrow_inc>=this.$refs.arrow.length?(this.currentFocus=!1,this.$nextTick((function(){return t.$refs.next_end.$refs.link.focus()}))):this.$nextTick((function(){t.$refs.arrow[t.arrow_inc].focus()}))},get_end_score:function(e){return sum(getScore(e,this.end))},get_cum_score:function(e){return sum(getScore(e))},focus_first_empty:function(){var e=this,t=function(t){if(null===e.$refs.arrow[t].value)return e.$nextTick((function(){e.$refs.arrow[t].focus()})),"break"};for(var n in this.$refs.arrow){var r=t(n);if("break"===r)break}}},mounted:function(){var e=this;this.$nextTick((function(){e.focus_first_empty()}))}}},"608c":function(e,t,n){},6968:function(e,t,n){"use strict";var r=n("2d65"),i=n.n(r);i.a},"7b58":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.event?n("v-container",{class:{"px-0":e.$vuetify.breakpoint.xsOnly}},[n("v-tabs",{attrs:{grow:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.tabs,(function(t){return n("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),n("v-tabs-items",{attrs:{touchless:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[n("v-tab-item",[n("v-sheet",{staticClass:"py-5"},[n("h1",{domProps:{textContent:e._s(e.event.name)}}),n("p",{domProps:{innerHTML:e._s(e.event_desciption)}})]),n("v-list",{attrs:{dense:""}},[n("v-subheader",[e._v("Rounds")]),e._l(e.event.rounds,(function(t){return n("v-list-item",{key:"round_"+t.id},[n("v-list-item-title",[e._v(" "+e._s(t.ord)+". "+e._s(t.label)+" "+e._s(t.course_name?"("+t.course_name+")":"")+" ")])],1)}))],2),n("eventParticipantList",{attrs:{p_user:e.p_user}})],1),n("v-tab-item",[n("eventResults")],1),e.event.archive?e._e():n("v-tab-item",[n("eventScoring",{attrs:{p_user:e.p_user}})],1)],1)],1):n("v-overlay",[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},i=[],s=(n("a4d3"),n("e01a"),n("4de4"),n("a15b"),n("ac1f"),n("1276"),n("5530")),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",[n("v-toolbar",{attrs:{dense:"",flat:""}},[e.event.is_open?[n("eventParticipantAdd",{attrs:{action:"Register"}}),null===e.user.id||Array.isArray(e.p_user)&&e.p_user.length?e._e():n("eventParticipantAdd",{attrs:{action:"Add Me"}})]:e._e(),n("v-spacer"),[e.event.creator].concat(e.event.admins).includes(e.user.email)?[e.$vuetify.breakpoint.smAndUp?[n("eventParticipantAdd",{attrs:{action:"Add Archer"}}),n("eventEdit")]:[n("v-menu",{attrs:{"close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{icon:""}},r),[n("v-icon",[e._v("mdi-dots-vertical")])],1)]}}],null,!1,2097855828),model:{value:e.creator_menu,callback:function(t){e.creator_menu=t},expression:"creator_menu"}},[n("v-card",{staticClass:"text-uppercase",attrs:{tile:""}},[n("v-list",{attrs:{dense:""}},[n("v-subheader",[e._v("admin menu")]),n("v-list-item-group",[n("v-list-item",{attrs:{inactive:""}},[n("v-list-item-content"),n("v-list-item-action",[n("eventParticipantAdd",{attrs:{action:"Add Archer"}})],1)],1)],1),n("v-list-item-group",[n("v-list-item",{attrs:{inactive:""}},[n("v-list-item-content"),n("v-list-item-action",[n("eventEdit")],1)],1)],1)],1)],1)],1)]]:e._e()],2),n("v-card",[n("v-card-title",[n("small",[e._v("Registered Archers")]),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.p_search,callback:function(t){e.p_search=t},expression:"p_search"}})],1),n("v-card-text",[n("v-data-table",{attrs:{dense:"","mobile-breakpoint":300,headers:e.p_table_header,items:e.p_table,search:e.p_search,"group-by":"class","items-per-page":50,"multi-sort":""},scopedSlots:e._u([[e.event.creator].concat(e.event.admins).includes(e.user.email)&&!e.event.archive?{key:"item.group",fn:function(t){return[n("v-edit-dialog",{key:t.item.id,attrs:{"return-value":t.item.group,large:"",persistent:""},on:{save:function(n){return e.save(t.item.id,{group:t.item.group})},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{type:"number","single-line":"",autofocus:""},model:{value:t.item.group,callback:function(n){e.$set(t.item,"group",n)},expression:"props.item.group"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.group)+" ")])]}}:null,[e.event.creator].concat(e.event.admins).includes(e.user.email)&&!e.event.archive?{key:"item.target",fn:function(t){return[n("v-edit-dialog",{key:t.item.id,attrs:{"return-value":t.item.target,large:"",persistent:""},on:{save:function(n){return e.save(t.item.id,{group_target:t.item.target})},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:e.target_rules,type:"number","single-line":"",autofocus:""},model:{value:t.item.target,callback:function(n){e.$set(t.item,"target",n)},expression:"props.item.target"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.target)+" ")])]}}:null,{key:"item.pos",fn:function(t){return[[e.event.creator].concat(e.event.admins).includes(e.user.email)&&!e.event.archive?n("v-edit-dialog",{key:t.item.id,attrs:{"return-value":t.item.pos,large:"",persistent:""},on:{save:function(n){return e.save(t.item.id,{group_pos:t.item.pos})},cancel:e.cancel},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:e.position_rules,counter:"1","single-line":"",autofocus:""},model:{value:t.item.pos,callback:function(n){e.$set(t.item,"pos",n)},expression:"props.item.pos"}})]},proxy:!0}],null,!0)},[e._v(" "+e._s(t.item.pos)+" "+e._s(t.item.has_account?"*":"")+" ")]):[e._v(" "+e._s(t.item.pos)+" ")]]}},{key:"item.action",fn:function(t){return[e.user.archer.id===t.item.aId&&e.event.is_open||[e.event.creator].concat(e.event.admins).includes(e.user.email)&&!e.event.archive?[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(n){return e.editP(t.item.id)}}},[e._v(" mdi-pencil ")]),n("v-icon",{attrs:{small:""},on:{click:function(n){return e.deleteP(t.item.id)}}},[e._v(" mdi-delete ")])]:e._e()]}}],null,!0)}),[e.event.creator].concat(e.event.admins).includes(e.user.email)&&!e.event.archive?n("p",[n("small",[e._v("'Position *' - indicates that archer has user account and could be digital scorer.")])]):e._e()],1)],1),n("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v("Edit participant info for "+e._s(e.p_meta.name))]),n("eventParticipantDetails",{attrs:{participant:e.p_edit}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.cancel(),e.dialog=!1}}},[e._v("Cancel")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.save(e.p_meta.id,e.p_edit),e.dialog=!1}}},[e._v("Save")])],1)],1)],1),n("v-snackbar",{attrs:{timeout:3e3,color:e.snackColor},model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v(" "+e._s(e.snackText)+" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.snack=!1}}},[e._v("Close")])],1)],1)},o=[],c=(n("7db0"),n("d81d"),n("2f62")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{fullscreen:"","hide-overlay":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{color:"warning"},on:{click:function(t){e.e_update(),e.e_edit()}}},r),[e._v("Edit Event")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-btn",{attrs:{icon:"",dark:""},on:{click:function(t){e.dialog=!1}}},[n("v-icon",[e._v("mdi-close")])],1),n("v-toolbar-title",[e._v("Edit "+e._s(e.event.name))]),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{attrs:{dark:"",text:""},on:{click:function(t){e.putEvent({eId:e.event.id,event:e.event}),e.dialog=!1}}},[e._v("Save")])],1)],1),n("v-card",{staticClass:"ma-5"},[n("v-card-title",[e._v("General Info")]),n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{rules:[function(e){return!!e||"This field is required"}],label:"Event name"},model:{value:e.event.name,callback:function(t){e.$set(e.event,"name",t)},expression:"event.name"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"270px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"Start date","prepend-icon":"mdi-calendar",rules:[function(e){return!!e||"Start date is required"}]},model:{value:e.event.date_start,callback:function(t){e.$set(e.event,"date_start",t)},expression:"event.date_start"}},r))]}}]),model:{value:e.date_start_menu,callback:function(t){e.date_start_menu=t},expression:"date_start_menu"}},[n("v-date-picker",{on:{input:function(t){e.date_start_menu=!1}},model:{value:e.event.date_start,callback:function(t){e.$set(e.event,"date_start",t)},expression:"event.date_start"}})],1)],1),n("v-col",{attrs:{cols:"4"}},[n("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"270px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-text-field",e._g({attrs:{label:"End date","prepend-icon":"mdi-calendar"},model:{value:e.event.date_end,callback:function(t){e.$set(e.event,"date_end",t)},expression:"event.date_end"}},r))]}}]),model:{value:e.date_end_menu,callback:function(t){e.date_end_menu=t},expression:"date_end_menu"}},[n("v-date-picker",{on:{input:function(t){e.date_end_menu=!1}},model:{value:e.event.date_end,callback:function(t){e.$set(e.event,"date_end",t)},expression:"event.date_end"}})],1)],1)],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{outlined:"",label:"Event details","auto-grow":""},model:{value:e.event.description,callback:function(t){e.$set(e.event,"description",t)},expression:"event.description"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"6"}},[n("v-autocomplete",{attrs:{autocomplete:"",items:e.event_type_choices,label:"Event visibility class"},model:{value:e.event.type,callback:function(t){e.$set(e.event,"type",t)},expression:"event.type"}})],1),n("v-col",{attrs:{cols:"6"}},[n("v-switch",{attrs:{label:e.event.is_open?"Registration is open":"Registration is closed"},model:{value:e.event.is_open,callback:function(t){e.$set(e.event,"is_open",t)},expression:"event.is_open"}}),n("v-switch",{attrs:{label:e.event.catering?"Offer catering":"No catering"},model:{value:e.event.catering,callback:function(t){e.$set(e.event,"catering",t)},expression:"event.catering"}}),n("v-switch",{attrs:{color:"error",label:e.event.archive?"Event is read-only (archived)":"Active event"},model:{value:e.event.archive,callback:function(t){e.$set(e.event,"archive",t)},expression:"event.archive"}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.deleteE(e.event.id)}}},[e._v("Delete Event")]),n("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.putEvent({eId:e.event.id,event:e.event})}}},[e._v("Save Changes")])],1)],1),n("v-card",{staticClass:"ma-5"},[n("v-card-title",[e._v("Manage Rounds")]),n("v-card-text",e._l(e.event.rounds,(function(t,r){return n("v-row",{key:r,attrs:{dense:""}},[n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Round description"},on:{input:function(t){e.event.rounds[r].is_changed=!0}},scopedSlots:e._u([{key:"prepend",fn:function(){return[n("strong",{staticClass:"lowered"},[e._v(e._s(r+1)+".")])]},proxy:!0}],null,!0),model:{value:e.event.rounds[r].label,callback:function(t){e.$set(e.event.rounds[r],"label",t)},expression:"event.rounds[index].label"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-autocomplete",{attrs:{rules:[function(e){return!!e||"Round course is mandatory"}],autocomplete:"",disabled:!!t.scorecards.length,items:e.courses,label:"Round type","item-text":"name","item-value":"id"},on:{input:function(t){e.event.rounds[r].is_changed=!0}},model:{value:e.event.rounds[r].course,callback:function(t){e.$set(e.event.rounds[r],"course",t)},expression:"event.rounds[index].course"}})],1),n("v-col",{attrs:{cols:"2"}},[n("v-switch",{attrs:{label:e.event.rounds[r].is_open?"Open":"Closed",error:!e.event.rounds[r].is_open},on:{change:function(t){e.event.rounds[r].is_changed=!0}},model:{value:e.event.rounds[r].is_open,callback:function(t){e.$set(e.event.rounds[r],"is_open",t)},expression:"event.rounds[index].is_open"}})],1),e.event.rounds[r].id?[e.event.rounds[r].is_changed?n("v-btn",{staticClass:"lowered",attrs:{color:"primary"},on:{click:function(t){return e.putRound(e.event.rounds[r])}}},[e._v("Update")]):e._e()]:n("v-btn",{staticClass:"lowered",attrs:{disabled:!e.event.rounds[r].course,color:"primary"},on:{click:function(t){e.addRound(Object.assign(e.event.rounds[r],{ord:r+1,event:e.event.id})),e.event.rounds.splice(r,1)}}},[e._v("Confirm")])],2)})),1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error"},on:{click:function(t){return e.deleteR()}}},[e._v("Remove last")]),n("v-btn",{attrs:{color:"primary"},on:{click:e.newRound}},[e._v("Add new")])],1)],1)],1)],1)},u=[],d=(n("fb6a"),n("b0c0"),n("2909")),v={data:function(){return{dialog:!1,date_start_menu:!1,date_end_menu:!1,event_type_choices:[{text:"Private",value:"private"},{text:"Club - visible to all members",value:"club"},{text:"Open - visible to all",value:"open"}],event:{}}},watch:{p_event:{deep:!0,handler:function(){this.e_edit()}},"event.archive":function(e){e&&(this.event.is_open=!1)}},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])({user:function(e){return e.user.user},courses:function(e){return e.courses.courses}})),{},{p_event:function(){return this.$store.getters["events/eventById"](parseInt(this.$route.params.id))}}),methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])("events",["delEvent","putEvent","addRound","delRound","putRound"])),{},{newRound:function(){var e=null,t="",n=this.event.rounds.slice(-1)[0];n&&(n.course&&(e=n.course),n.label&&(t=n.label)),this.event.rounds.push({label:t,course:e,is_open:!0,scorecards:[]})},deleteE:function(e){confirm('Event "'+this.event.name+'" will be removed permanently')&&this.delEvent(e)&&this.$router.push("/events")},deleteR:function(){var e=this.event.rounds.slice(-1)[0];e.scorecards.length>0?confirm('Round "'+e.ord+". "+e.label+'" has been used already. Removing it will also delete '+e.scorecards.length+" scorecard(s)")&&this.delLastRound():this.delLastRound()},delLastRound:function(){var e=this.event.rounds.pop();e.id&&this.delRound({eId:this.event.id,rId:e.id})},e_edit:function(){this.event=Object.assign({},this.p_event),this.event.rounds=Object(d["a"])(this.event.rounds)},e_update:function(){this.$store.dispatch("events/updateEvent",parseInt(this.$route.params.id))}}),created:function(){this.$store.dispatch("courses/getCourses")}},h=v,p=(n("e39a"),n("2877")),_=n("6544"),f=n.n(_),m=n("c6a6"),g=n("8336"),b=n("b0af"),w=n("99d9"),x=n("62ad"),k=n("2e4b"),y=n("169a"),C=n("132d"),O=n("e449"),$=n("0fd9"),T=n("2fa4"),E=n("b73d"),I=n("8654"),A=n("a844"),V=n("71d9"),S=n("2a7f"),j=Object(p["a"])(h,l,u,!1,null,"b156abe6",null),P=j.exports;f()(j,{VAutocomplete:m["a"],VBtn:g["a"],VCard:b["a"],VCardActions:w["a"],VCardText:w["c"],VCardTitle:w["d"],VCol:x["a"],VDatePicker:k["a"],VDialog:y["a"],VIcon:C["a"],VMenu:O["a"],VRow:$["a"],VSpacer:T["a"],VSwitch:E["a"],VTextField:I["a"],VTextarea:A["a"],VToolbar:V["a"],VToolbarItems:S["a"],VToolbarTitle:S["b"]});var B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.pModel?n("v-container",[n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{items:e.pModel.style.choices,label:"Style*",rules:[function(e){return!!e||"Bow style is required"}],dense:""},scopedSlots:e._u([{key:"item",fn:function(t){return[e._v(" "+e._s(t.item.value)+" -- "+e._s(t.item.display_name)+" ")]}},{key:"selection",fn:function(t){return[e._v(" "+e._s(t.item.value)+" -- "+e._s(t.item.display_name)+" ")]}}],null,!1,2811362204),model:{value:e.participant.style,callback:function(t){e.$set(e.participant,"style",t)},expression:"participant.style"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{items:e.pModel.age_group.choices,label:"Age Group*",rules:[function(e){return!!e||"Age Group is required"}],"item-text":"display_name",dense:""},model:{value:e.participant.age_group,callback:function(t){e.$set(e.participant,"age_group",t)},expression:"participant.age_group"}})],1),n("v-col",{attrs:{cols:"4"}},[e.catering?n("v-switch",{attrs:{label:e.participant.food?"I will eat":"I will not eat",color:"primary"},model:{value:e.participant.food,callback:function(t){e.$set(e.participant,"food",t)},expression:"participant.food"}}):e._e()],1)],1),n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{outlined:"",label:"Comments to organiser(s)"},model:{value:e.participant.comments,callback:function(t){e.$set(e.participant,"comments",t)},expression:"participant.comments"}})],1)],1)],1):n("v-container",[n("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},R=[],D={props:{participant:Object,catering:Boolean},data:function(){return{}},computed:Object(s["a"])({},Object(c["c"])({pModel:function(e){return e.events.participantModel}})),created:function(){this.$store.dispatch("events/getParticipantOpts")}},M=D,L=n("a523"),W=n("490a"),q=n("b974"),F=Object(p["a"])(M,B,R,!1,null,null,null),N=F.exports;f()(F,{VCol:x["a"],VContainer:L["a"],VProgressCircular:W["a"],VRow:$["a"],VSelect:q["a"],VSwitch:E["a"],VTextarea:A["a"]});var U=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.event.archive?e._e():n("v-dialog",{attrs:{"max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[n("v-btn",e._g({attrs:{color:"primary",text:"Register"!==e.action}},r),[e._v(e._s(e.action))])]}}],null,!1,137954070),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-card",[n("v-card-title",[e._v(e._s(e.action)+' to "'+e._s(e.event.name)+'"')]),n("v-card-text",[n("v-form",{model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("eventParticipantDetails",{attrs:{participant:e.participant,catering:e.event.catering}}),"Add Me"!==e.action?n("v-container",[n("v-row",[n("v-autocomplete",{attrs:{"search-input":e.query,items:e.qresponse_items,label:"Search for existing Archers",placeholder:"Start typing to query","prepend-icon":"mdi-database-search","return-object":"","hide-no-data":"","no-filter":"",clearable:""},on:{"update:searchInput":function(t){e.query=t},"update:search-input":function(t){e.query=t}},model:{value:e.archer,callback:function(t){e.archer=t},expression:"archer"}})],1),e.archer?e._e():[n("v-alert",{attrs:{outlined:"",border:"left",prominent:"",type:"warning"}},[n("b",[e._v("Form below")]),e._v(" creates new archer profile database entry. Use it only if archer is not yet in the database! ")]),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Your full name*",rules:[function(e){return!!e||"This field is required"}]},model:{value:e.participant.archer.full_name,callback:function(t){e.$set(e.participant.archer,"full_name",t)},expression:"participant.archer.full_name"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{items:[{text:"Male",value:"M"},{text:"Female",value:"F"}],label:"Gender*",rules:[function(e){return!!e||"Choice must be made :)"}]},model:{value:e.participant.archer.gender,callback:function(t){e.$set(e.participant.archer,"gender",t)},expression:"participant.archer.gender"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-select",{attrs:{items:e.clubs?e.clubs:[],label:"Choose Club*",rules:[function(e){return!!e||"Choose ..no club.. if other options are not suitable"}],"item-text":"name","item-value":"id"},model:{value:e.participant.archer.club,callback:function(t){e.$set(e.participant.archer,"club",t)},expression:"participant.archer.club"}})],1)],1),n("v-row",[n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Contact email address*",rules:[function(e){return!!e||"This field is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}]},model:{value:e.participant.archer.email,callback:function(t){e.$set(e.participant.archer,"email",t)},expression:"participant.archer.email"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Contact phone number"},model:{value:e.participant.archer.phone,callback:function(t){e.$set(e.participant.archer,"phone",t)},expression:"participant.archer.phone"}})],1),n("v-col",{attrs:{cols:"4"}},[n("v-text-field",{attrs:{label:"Archer national ID",hint:"FAAE ID in Estonia - first 7 digits from your national ID code."},model:{value:e.participant.archer.nat_id,callback:function(t){e.$set(e.participant.archer,"nat_id",t)},expression:"participant.archer.nat_id"}})],1)],1)]],2):e._e()],1),n("small",[n("p",[e._v("fields marked with '*' are mandatory")])])],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.dialog=!1}}},[e._v("Close")]),n("v-btn",{attrs:{color:"primary",disabled:!e.valid},on:{click:function(t){return e.addParticipantProxy()}}},[e._v(e._s(e.action))])],1)],1)],1)},z=[],K={components:{eventParticipantDetails:N},props:{action:String},data:function(){return{dialog:!1,valid:!1,archer:null,query:"",participant:{event:null,archer:{full_name:"",gender:"",club:"",email:"",phone:""},style:"",age_group:"",comments:"",food:!1}}},watch:{query:function(e){e&&e.length>=2?this.searchArcher(e):this.clearSearch([{header:"be more specific"}])},archer:function(e){this.participant.archer=e||{full_name:"",gender:"",club:"",email:"",phone:""}}},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])({user:function(e){return e.user.user},qresponse:function(e){return e.user.qresponse},clubs:function(e){return e.clubs.clubs}})),{},{event:function(){return this.$store.getters["events/eventById"](parseInt(this.$route.params.id))},qresponse_items:function(){return this.qresponse.map((function(e){if(e.id){var t=e.full_name+" ("+e.club+")"+(e.user?" - has account":"");return Object.assign({},e,{text:t})}return e}))}}),methods:Object(s["a"])(Object(s["a"])(Object(s["a"])({},Object(c["b"])("events",["addParticipant"])),Object(c["b"])("user",["searchArcher","clearSearch"])),{},{addParticipantProxy:function(){this.participant.event=parseInt(this.$route.params.id),"Add Me"===this.action&&(this.participant.archer=this.user.archer),this.addParticipant(this.participant),this.dialog=!1,this.archer=null,this.query=""}}),created:function(){this.$store.dispatch("clubs/getClubs")}},G=K,H=n("0798"),X=n("4bd4"),Y=Object(p["a"])(G,U,z,!1,null,"3d9cee38",null),J=Y.exports;f()(Y,{VAlert:H["a"],VAutocomplete:m["a"],VBtn:g["a"],VCard:b["a"],VCardActions:w["a"],VCardText:w["c"],VCardTitle:w["d"],VCol:x["a"],VContainer:L["a"],VDialog:y["a"],VForm:X["a"],VRow:$["a"],VSelect:q["a"],VSpacer:T["a"],VTextField:I["a"]});var Q={components:{eventEdit:P,eventParticipantDetails:N,eventParticipantAdd:J},props:{p_user:Array},data:function(){return{p_search:"",p_meta:{id:null,name:null},p_edit:{age_group:"",style:"",food:"",comments:""},target_rules:[function(e){return!!e||"required"}],position_rules:[function(e){return!!e&&e.length<=1||"Position is marked with single capital letter"}],dialog:!1,creator_menu:!1,snack:!1,snackColor:"",snackText:""}},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])({user:function(e){return e.user.user}})),{},{event:function(){return this.$store.getters["events/eventById"](parseInt(this.$route.params.id))},p_table_header:function(){var e=[{text:"Name",value:"name"},{text:"Class",value:"class"},{text:"Club",value:"club"},{text:"Group",value:"group",width:"90px"},{text:"Position",value:"pos",width:"80px"},{text:"Start From",value:"target",width:"90px"}];return!this.event.archive&&this.user.id&&(e.push({text:"Actions",value:"action",sortable:!1,width:"1%"}),this.user.email===this.event.creator&&e.push.apply(e,[{text:"Food",value:"food",width:"80px"},{text:"Contact",value:"contact"},{text:"Comments",value:"comments"}])),e},p_table:function(){return Array.isArray(this.event.participants)?this.event.participants.map((function(e){return{id:e.id,aId:e.archer.id,name:e.archer.full_name,class:e.age_group+e.archer.gender+e.style,club:e.archer.club,group:e.group,pos:e.group_pos,has_account:e.archer.user,target:e.group_target,food:e.food?"Yes":"No",contact:e.archer.contact||"",comments:e.comments}})):[]}}),methods:Object(s["a"])(Object(s["a"])({},Object(c["b"])("events",["addParticipant","delParticipant","putParticipant"])),{},{save:function(e,t){var n=this,r=Object.assign({},this.event.participants.find((function(t){return t.id===e})),t);this.putParticipant({pId:r.id,participant:r}).then((function(){n.snack=!0,n.snackColor="success",n.snackText="Changes have been saved"}))},cancel:function(){this.snack=!0,this.snackColor="error",this.snackText="Canceled"},editP:function(e){var t=this.event.participants.find((function(t){return t.id===e}));this.p_meta={id:t.id,name:t.archer.full_name},this.p_edit={age_group:t.age_group,style:t.style,food:t.food,comments:t.comments},this.dialog=!0},deleteP:function(e){var t=this.event.participants.find((function(t){return t.id===e}));confirm(t.archer.full_name+" will be removed from participant list (and their scorecards will be lost)")&&this.delParticipant({pId:t.id,eId:t.event})}})},Z=Q,ee=n("8fea"),te=(n("c79c"),n("e4d3")),ne=n("7560"),re=n("80d2"),ie=n("afdd"),se=n("326d"),ae=n("58df"),oe=Object(ae["a"])(te["a"],ne["a"]).extend({name:"v-edit-dialog",props:{cancelText:{default:"Cancel"},large:Boolean,eager:Boolean,persistent:Boolean,saveText:{default:"Save"},transition:{type:String,default:"slide-x-reverse-transition"}},data:function(){return{isActive:!1}},watch:{isActive:function(e){e?(this.$emit("open"),setTimeout(this.focus,50)):this.$emit("close")}},methods:{cancel:function(){this.isActive=!1,this.$emit("cancel")},focus:function(){var e=this.$refs.content.querySelector("input");e&&e.focus()},genButton:function(e,t){return this.$createElement(ie["a"],{props:{text:!0,color:"primary",light:!0},on:{click:e}},t)},genActions:function(){var e=this;return this.$createElement("div",{class:"v-small-dialog__actions"},[this.genButton(this.cancel,this.cancelText),this.genButton((function(){e.save(e.returnValue),e.$emit("save")}),this.saveText)])},genContent:function(){var e=this;return this.$createElement("div",{staticClass:"v-small-dialog__content",on:{keydown:function(t){var n=e.$refs.content.querySelector("input");t.keyCode===re["w"].esc&&e.cancel(),t.keyCode===re["w"].enter&&n&&(e.save(n.value),e.$emit("save"))}},ref:"content"},[this.$slots.input])}},render:function(e){var t=this;return e(se["a"],{staticClass:"v-small-dialog",class:this.themeClasses,props:{contentClass:"v-small-dialog__menu-content",transition:this.transition,origin:"top right",right:!0,value:this.isActive,closeOnClick:!this.persistent,closeOnContentClick:!1,eager:this.eager,light:this.light,dark:this.dark},on:{input:function(e){return t.isActive=e}},scopedSlots:{activator:function(n){var r=n.on;return e("div",{staticClass:"v-small-dialog__activator",on:r},[e("span",{staticClass:"v-small-dialog__activator__content"},t.$slots.default)])}}},[this.genContent(),this.large?this.genActions():null])}}),ce=n("8860"),le=n("da13"),ue=n("1800"),de=n("5d23"),ve=n("1baa"),he=n("8dd9"),pe=(n("a9e3"),n("ca71"),n("a9ad")),_e=n("f2e7"),fe=n("fe6c"),me=n("d9bd"),ge=Object(ae["a"])(pe["a"],_e["a"],Object(fe["b"])(["absolute","top","bottom","left","right"])).extend({name:"v-snackbar",props:{multiLine:Boolean,timeout:{type:Number,default:6e3},vertical:Boolean},data:function(){return{activeTimeout:-1}},computed:{classes:function(){return{"v-snack--active":this.isActive,"v-snack--absolute":this.absolute,"v-snack--bottom":this.bottom||!this.top,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--top":this.top,"v-snack--vertical":this.vertical}}},watch:{isActive:function(){this.setTimeout()}},created:function(){this.$attrs.hasOwnProperty("auto-height")&&Object(me["d"])("auto-height",this)},mounted:function(){this.setTimeout()},methods:{setTimeout:function(){var e=this;window.clearTimeout(this.activeTimeout),this.isActive&&this.timeout&&(this.activeTimeout=window.setTimeout((function(){e.isActive=!1}),this.timeout))}},render:function(e){return e("transition",{attrs:{name:"v-snack-transition"}},[this.isActive&&e("div",{staticClass:"v-snack",class:this.classes,on:this.$listeners},[e("div",this.setBackgroundColor(this.color,{staticClass:"v-snack__wrapper",attrs:{role:"alert"}}),[e("div",{staticClass:"v-snack__content"},this.$slots.default)])])])}}),be=n("e0c7"),we=Object(p["a"])(Z,a,o,!1,null,null,null),xe=we.exports;f()(we,{VBtn:g["a"],VCard:b["a"],VCardActions:w["a"],VCardText:w["c"],VCardTitle:w["d"],VDataTable:ee["a"],VDialog:y["a"],VEditDialog:oe,VIcon:C["a"],VList:ce["a"],VListItem:le["a"],VListItemAction:ue["a"],VListItemContent:de["a"],VListItemGroup:ve["a"],VMenu:O["a"],VSheet:he["a"],VSnackbar:ge,VSpacer:T["a"],VSubheader:be["a"],VTextField:I["a"],VToolbar:V["a"]});var ke=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",[n("v-card-title",[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.update_r_table()}}},[n("v-icon",[e._v("mdi-refresh")])],1),n("small",[e._v("Results")]),n("v-spacer"),e._v(" "+e._s(e.event.name)+" "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.r_search,callback:function(t){e.r_search=t},expression:"r_search"}})],1),n("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:e.r_table_header,items:e.r_table,search:e.r_search,"group-by":"class","multi-sort":"","items-per-page":50},scopedSlots:e._u([{key:"group",fn:function(t){return[n("tr",{staticClass:"v-row-group__header"},[n("td",{attrs:{colspan:t.headers.length}},[e._v(e._s(t.group))])]),e._l(t.items,(function(r){return n("tr",{key:r.id},e._l(t.headers,(function(t){return n("td",{key:t.text},["name"===t.value?[n("v-btn",{attrs:{icon:"",small:""},on:{click:function(t){return e.participant_sc(r.id)}}},[n("v-icon",{attrs:{size:"16"}},[e._v("mdi-book-open-outline")])],1)]:e._e(),e._v(" "+e._s(r[t.value])+" "),"pr"+t.value in r&&!1===e.event.archive?[n("v-progress-circular",{attrs:{color:100===r["pr"+t.value]?"green":"error",width:"1",size:"12"},model:{value:r["pr"+t.value],callback:function(n){e.$set(r,"pr"+t.value,n)},expression:"row['pr'+col.value]"}})]:e._e()],2)})),0)}))]}}])}),n("v-dialog",{attrs:{"max-width":"650px"},model:{value:e.sc_dialog,callback:function(t){e.sc_dialog=t},expression:"sc_dialog"}},[null!==e.participant?n("v-card",[n("v-card-title",[e._v(e._s(e.participant.archer.full_name)+" "+e._s(e.participant.class)+" "+e._s(e.participant.archer.club))]),n("v-card-subtitle",[e._v(e._s(e.event.name))]),n("v-card-text",[n("eventParticipantScorecards",{attrs:{participant:e.participant,rounds:e.event.rounds,edit:e.sc_edit()}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.sc_dialog=!1}}},[e._v("Close")])],1)],1):e._e()],1)],1)},ye=[],Ce=(n("99af"),n("caad"),n("d3b7"),n("25f0"),n("2532"),n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",[e._l(e.get_rounds(),(function(t,r){return n("v-row",{key:r},[t.halves?n("v-card",{attrs:{flat:""}},[n("v-card-title",[e._v(" "+e._s(t.ord)+". "+e._s(t.label)+" ")]),n("v-card-text",[n("v-row",e._l(t.halves,(function(r,i){return n("v-col",{key:i},[n("table",[n("thead",[n("tr",[n("th",[e._v("End")]),n("th",{attrs:{colspan:t.nr_of_arrows}},[e._v("Arrows")]),n("th",[e._v("Sum")]),n("th",[e._v("Cum")])])]),n("tbody",e._l(r,(function(r){return n("tr",{key:r.id},[n("td",{staticClass:"end-ord"},[e._v(" "+e._s(r.ord)+" ")]),e._l(r.nr_of_arrows,(function(t){return n("td",{key:"a"+t,staticClass:"end-arrow"},[null!==r.arrows?[e._v(" "+e._s(r.arrows[t-1].x?"X":0===r.arrows[t-1].score?"M":r.arrows[t-1].score)+" ")]:e._e()],2)})),r.nr_of_arrows<t.nr_of_arrows?e._l(t.nr_of_arrows-r.nr_of_arrows,(function(e){return n("td",{key:"empty"+e})})):e._e(),n("td",{staticClass:"end-sums text-right"},[e._v(" "+e._s(r.sum)+" ")]),n("td",{staticClass:"end-sums text-right"},[e._v(" "+e._s(r.cum)+" ")])],2)})),0)])])})),1)],1),n("v-card-actions",[n("v-spacer"),e.edit?[n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(n){return e.edit_sc(t)}}},[e._v("edit")])]:e._e()],2)],1):[e.edit?n("v-alert",{attrs:{type:"info",prominent:""}},[n("v-row",{attrs:{align:"center"}},[n("v-col",{staticClass:"grow"},[e._v("For "+e._s(e.participant.archer.full_name)+"("+e._s(e.participant.class)+") there is no scorecard for "+e._s(t.ord)+". "+e._s(t.label)+" round!")]),n("v-col",{staticClass:"shrink"},[n("v-btn",{on:{click:function(n){return e.get_scorecards(t.id)}}},[e._v("Add")])],1)],1)],1):e._e()]],2)})),n("v-dialog",{model:{value:e.edit_dialog,callback:function(t){e.edit_dialog=t},expression:"edit_dialog"}},[n("v-card",[e.edit_round?n("v-card-title",[e._v(" "+e._s(e.edit_round.ord)+". "+e._s(e.edit_round.label)+" ")]):e._e(),n("eventParticipantScorecardEdit",{attrs:{round:e.edit_round}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(t){e.edit_dialog=!1}}},[e._v("Close")])],1)],1)],1),n("v-snackbar",{attrs:{timeout:5e3,color:e.snackColor},model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v(" "+e._s(e.snackText)+" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.snack=!1}}},[e._v("Close")])],1)],2)}),Oe=[],$e=(n("13d5"),n("b85c")),Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card-text",[n("v-row",e._l(e.round.halves,(function(t,r){return n("v-col",{key:e.round.id+"_"+r},[n("table",[n("thead",[n("tr",[n("th",[e._v("End")]),n("th",{attrs:{colspan:e.round.nr_of_arrows}},[e._v("Arrows")]),n("th",[e._v("Sum")])])]),n("tbody",e._l(t,(function(t){return n("tr",{key:t.id},[n("td",{staticClass:"end-ord"},[e._v(" "+e._s(t.ord)+" ")]),e._l(e.round.sc.arrows.filter((function(e){return e.end==t.id})),(function(r,i){return n("td",{key:r.id,staticClass:"end-arrow"},[n("v-select",{ref:"arrow",refInFor:!0,attrs:{items:e.sc_eval(t.scoring),"append-icon":"",loading:r.loading,error:r.error,"background-color":r.x?"#FFC300":0===r.score?"#9E9E9E":"",readonly:"",outlined:"",dense:""},on:{focus:function(n){e.currentFocus={end:t,aId:r.id},e.arrow_inc=t.aOrd+i}},scopedSlots:e._u([{key:"selection",fn:function(){return[n("div",{staticClass:"v-select__selection v-select__selection--comma"},[e._v(e._s(r?r.x?"X":0===r.score?"M":r.score:""))])]},proxy:!0}],null,!0),model:{value:r.score,callback:function(t){e.$set(r,"score",t)},expression:"a.score"}})],1)})),n("td",{staticClass:"end-sums text-right"},[e._v(" "+e._s(e.end_score(e.round.sc.arrows.filter((function(e){return e.end==t.id}))))+" ")])],2)})),0)])])})),1),e.currentFocus?n("v-row",[n("v-spacer"),e._l(e.sc_eval(e.currentFocus.end.scoring,e.currentFocus.end.x),(function(t){return[n("v-btn",{key:"score"+e.currentFocus.end.id+"_"+t.text,staticClass:"sc-btn",on:{click:function(n){return n.preventDefault(),e.enter_score(t)}}},[e._v(e._s(t.text))])]})),n("v-spacer")],2):e._e()],1)},Ee=[],Ie=n("b684"),Ae=Ie["a"],Ve=(n("9bff"),Object(p["a"])(Ae,Te,Ee,!1,null,"3c197607",null)),Se=Ve.exports;function je(e){return e.reduce((function(e,t){return e+t}))}f()(Ve,{VBtn:g["a"],VCardText:w["c"],VCol:x["a"],VRow:$["a"],VSelect:q["a"],VSpacer:T["a"]});var Pe={components:{eventParticipantScorecardEdit:Se},props:{participant:Object,rounds:Array,edit:Boolean},data:function(){return{edit_dialog:!1,edit_round:null,scorecards_loading:!1,snack:!1,snackText:"",snackColor:""}},computed:Object(s["a"])({},Object(c["c"])({courses:function(e){return e.courses.courses}})),methods:{get_rounds:function(){var e=this,t=Object(d["a"])(this.rounds);return t.map((function(t){var n=e.participant.scorecards.find((function(e){return e.round===t.id}));if(!n)return t;var r=e.courses.find((function(e){return e.id===t.course}));if(!r)return e.$store.dispatch("courses/getCourses",t.course),null;var i,s=r.ends,a=0,o=0,c=[],l=[],u=Object($e["a"])(s);try{var v=function(){var e=i.value,t=n.arrows.filter((function(t){return t.end===e.id})),s=0;null!==t&&(s=je(t.map((function(e){return e.score})))),a=e.nr_of_arrows>a?e.nr_of_arrows:a,o+=s,l.push(Object.assign({},e,{arrows:t,sum:s,cum:o})),!0===r.halves&&e.ord===r.ends.length/2&&(c.push(Object(d["a"])(l)),l=[])};for(u.s();!(i=u.n()).done;)v()}catch(h){u.e(h)}finally{u.f()}return c.push(l),Object.assign({},t,{nr_of_arrows:a,halves:c,sc:n})}))},edit_sc:function(e){var t=this.courses.find((function(t){return t.id===e.course}));t||this.$store.dispatch("courses/getCourses",e.course);var n,r=t.ends,i=0,s=[],a=[],o=Object($e["a"])(r);try{for(o.s();!(n=o.n()).done;){var c=n.value;a.push(Object.assign({},c,{aOrd:i})),!0===t.halves&&c.ord===t.ends.length/2&&(s.push(Object(d["a"])(a)),a=[]),i+=c.nr_of_arrows}}catch(l){o.e(l)}finally{o.f()}s.push(a),this.edit_round=Object.assign({},e,{halves:s}),this.edit_dialog=!0},get_scorecards:function(e){var t=this;this.$store.dispatch("events/resetScoreCardsUserGroup"),this.scorecards_loading=!0,this.$store.dispatch("events/getScoreCardsAdmin",{eId:this.participant.event,rId:e,group:this.participant.group,group_target:this.participant.group_target}).then((function(){t.scorecards_loading=!1,t.$store.dispatch("events/updateEvent",t.participant.event),t.snack=!0,t.snackColor="info",t.snackText="Reopen scorecard dialog for the changes to take effect!"})).catch((function(e){t.scorecards_loading=!1,"ECONNABORTED"===e.code&&(t.snack=!0,t.snackColor="error",t.snackText="Operation timed out. Try again in few seconds.")}))}}},Be=Pe,Re=(n("fcb1"),Object(p["a"])(Be,Ce,Oe,!1,null,"49bfebe6",null)),De=Re.exports;f()(Re,{VAlert:H["a"],VBtn:g["a"],VCard:b["a"],VCardActions:w["a"],VCardText:w["c"],VCardTitle:w["d"],VCol:x["a"],VContainer:L["a"],VDialog:y["a"],VRow:$["a"],VSnackbar:ge,VSpacer:T["a"]});var Me=n("a676");function Le(e,t){var n=t.scorecards.find((function(t){return t.round===e.id}));return n?n.arrows.map((function(e){return e.score})):[null]}function We(e,t){var n=t.scorecards.find((function(t){return t.round===e.id}));return n?n.arrows.map((function(e){return e.x?1:0})):[null]}var qe={components:{eventParticipantScorecards:De},data:function(){return{r_search:"",sc_dialog:!1,participant:null}},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])({user:function(e){return e.user.user}})),{},{event:function(){return this.$store.getters["events/eventById"](parseInt(this.$route.params.id))},r_table_header:function(){if(this.event){var e=[{text:"Place",value:"place",width:"1%"},{text:"Name",value:"name"},{text:"Club",value:"club"},{text:"Class",value:"class"}];return e.push.apply(e,Object(d["a"])(this.event.rounds.map((function(e){return{text:e.ord.toString()+". "+e.label,value:e.ord.toString()}})))),e.push({text:"x",value:"x",width:"1%"}),e.push({text:"Sum",value:"sum",width:"1%"}),e}return[{text:"Name",value:"name"},{text:"Class",value:"class"},{text:"Round",value:"round"}]},r_table:function(){if(Array.isArray(this.event.participants)){var e=this.event.participants.map((function(e){var t={id:e.id,name:e.archer.full_name,class:e.age_group+e.archer.gender+e.style,club:e.archer.club},n=this.rounds.map((function(n){return t[n.ord]=Me["a"].sum(Le(n,e)),-1!==n.course_name.search("shootoff")?(t[n.ord]>0&&(t.shootoff=t[n.ord]),0):t[n.ord]}));t["sum"]=n.length?Me["a"].sum(n):0;var r=this.rounds.map((function(t){return-1!==t.course_name.search("shootoff")?0:Me["a"].sum(We(t,e))}));return t["x"]=r.length?Me["a"].sum(r):0,this.rounds.map((function(n){var r=Le(n,e);t["pr"+n.ord]=r.filter((function(e){return null!==e})).length/r.length*100})),t}),this.event);return Me["a"].participantRank(e),e}return[]}}),methods:{update_r_table:function(){this.$store.dispatch("events/updateEvent",this.event.id)},participant_sc:function(e){this.participant=this.event.participants.find((function(t){return t.id===e})),this.participant["class"]=this.participant.age_group+this.participant.archer.gender+this.participant.style,this.sc_dialog=!0},sc_edit:function(){return[this.event.creator].concat(Object(d["a"])(this.event.admins)).includes(this.user.email)&&!this.event.archive}}},Fe=qe,Ne=(n("c071"),Object(p["a"])(Fe,ke,ye,!1,null,"7997b794",null)),Ue=Ne.exports;f()(Ne,{VBtn:g["a"],VCard:b["a"],VCardActions:w["a"],VCardSubtitle:w["b"],VCardText:w["c"],VCardTitle:w["d"],VDataTable:ee["a"],VDialog:y["a"],VIcon:C["a"],VProgressCircular:W["a"],VSpacer:T["a"],VTextField:I["a"]});var ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.event?n("v-card",[!0===e.event.archive?n("v-card-title",[n("small",[e._v("This event is archived and can not be edited any more!")])]):null===e.user.id?n("v-card-title",[n("p",[e._v("You need to be logged in for scoring")])]):Array.isArray(e.p_user)&&e.p_user.length?[n("v-card-title",[e._v(" Round "),n("v-spacer"),e.p_user.length>1?n("v-select",{attrs:{label:"Select your group to score.",items:e.p_user,"item-text":"group","return-object":""},model:{value:e.user_group,callback:function(t){e.user_group=t},expression:"user_group"}}):e._e(),n("v-select",{attrs:{label:"Select round for scoring.",items:e.event_rounds,"return-object":""},on:{input:function(t){e.get_scorecards(e.event.id,e.round.id),e.get_course(e.round.course)}},model:{value:e.round,callback:function(t){e.round=t},expression:"round"}})],1),n("v-divider"),null!==e.round.id?[n("v-pagination",{attrs:{length:e.course.ends?e.course.ends.length:0,"total-visible":14,circle:""},model:{value:e.end_view_pager,callback:function(t){e.end_view_pager=t},expression:"end_view_pager"}}),n("v-window",{attrs:{"show-arrows":!1,touchless:""},model:{value:e.end_view,callback:function(t){e.end_view=t},expression:"end_view"}},e._l(e.course.ends,(function(t,r){return n("v-window-item",{key:"e"+e.currentRound+":"+t.id,ref:"end",refInFor:!0},[!0===e.scorecards_loading?n("v-sheet",{staticClass:"text-center py-10"},[n("v-progress-circular",{attrs:{indeterminate:"",size:"64",color:"secondary"}})],1):n("eventScoringEnd",{attrs:{event:e.event,round:e.round,end:t,scorecards:e.scorecards,isActive:e.end_view===r},on:{end_nav:e.update_end_view}})],1)})),1)]:e._e()]:n("v-card-title",[n("small",[e._v("You need to register to the event first!")])]),n("v-snackbar",{attrs:{timeout:3e3,color:e.snackColor},model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v(" "+e._s(e.snackText)+" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.snack=!1}}},[e._v("Close")])],1)],2):e._e()},Ke=[],Ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",{attrs:{light:""}},[n("h4",[e._v(" End: "+e._s(e.end.ord)+" "+e._s(e.end.label?"("+e.end.label+")":"")+" "),n("small",[e._v(" -- Round: "+e._s(e.round.ord)+" "+e._s(e.round.label?"("+e.round.label+")":"")+" -- ")])]),e._l(e.scorecards,(function(t,r){return n("v-row",{key:"sc"+t.id,staticClass:"flex-nowrap",class:{oflow:e.$vuetify.breakpoint.xsOnly},attrs:{dense:""}},[n("v-col",{staticClass:"text text-truncate",attrs:{cols:"2"}},[e._v(e._s(e.get_participant(t.participant).archer.full_name))]),e._l(t.arrows.filter((function(t){return t.end==e.end.id})),(function(i,s){return n("v-col",{key:"a"+i.id,staticClass:"score",attrs:{cols:"1"}},[n("v-select",{ref:"arrow",refInFor:!0,attrs:{items:e.sc_eval(e.end.scoring),"append-icon":"",loading:i.loading,error:i.error,"background-color":i.x?"#FFC300":0===i.score?"#9E9E9E":"",readonly:"",outlined:"",dense:""},on:{focus:function(n){e.currentFocus=[t.id,i.id],e.arrow_inc=r*t.arrows.filter((function(t){return t.end==e.end.id})).length+s}},scopedSlots:e._u([{key:"selection",fn:function(){return[n("div",{staticClass:"v-select__selection v-select__selection--comma"},[e._v(e._s(i?i.x?"X":0===i.score?"M":i.score:""))])]},proxy:!0}],null,!0),model:{value:i.score,callback:function(t){e.$set(i,"score",t)},expression:"a.score"}})],1)})),n("v-col",{staticClass:"text-cum",attrs:{cols:"1"}},[e._v(" "+e._s(e.get_end_score(t))+" ")]),n("v-col",{staticClass:"text-cum",attrs:{cols:"1"}},[e._v(" "+e._s(e.get_cum_score(t))+" ")])],2)})),n("v-row",{attrs:{dense:""}},[n("v-col",{attrs:{cols:"2"}},[n("v-btn",{attrs:{icon:""},on:{click:function(t){e.currentFocus=null,e.$emit("end_nav","-")}}},[n("v-icon",[e._v("mdi-chevron-left")])],1)],1),n("v-col",{attrs:{cols:"8"}},[e._l(e.sc_eval(e.end.scoring,e.end.x),(function(t){return[n("v-btn",{key:"score"+e.end.id+"_"+t.text,staticClass:"sc-btn",on:{click:function(n){return n.preventDefault(),e.enter_score(t)}}},[e._v(e._s(t.text))])]}))],2),n("v-col",{attrs:{cols:"2"}},[n("v-btn",{ref:"next_end",attrs:{icon:""},on:{click:function(t){e.currentFocus=null,e.$emit("end_nav","+")}}},[n("v-icon",[e._v("mdi-chevron-right")])],1)],1)],1),n("v-snackbar",{attrs:{timeout:3e3,color:e.snackColor},model:{value:e.snack,callback:function(t){e.snack=t},expression:"snack"}},[e._v(" "+e._s(e.snackText)+" "),n("v-btn",{attrs:{text:""},on:{click:function(t){e.snack=!1}}},[e._v("Close")])],1)],2)},He=[],Xe=n("412c"),Ye=Xe["a"],Je=(n("6968"),Object(p["a"])(Ye,Ge,He,!1,null,"077b807e",null)),Qe=Je.exports;f()(Je,{VBtn:g["a"],VCol:x["a"],VIcon:C["a"],VRow:$["a"],VSelect:q["a"],VSheet:he["a"],VSnackbar:ge});var Ze={components:{eventScoringEnd:Qe},props:{p_user:Array},data:function(){return{user_group:{id:null},end_view:0,arrow_inc:0,currentRound:null,course:{ends:[]},round:{id:null},scorecards_loading:!1,snack:!1,snackText:"",snackColor:""}},watch:{event:{deep:!0,handler:function(){var e=this,t=this.event.rounds.find((function(t){return t.id===e.round.id}));t&&!1!==t.is_open||(this.round={id:null})}}},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])({user:function(e){return e.user.user},courses:function(e){return e.courses.courses},scorecards:function(e){return e.events.scorecards}})),{},{event:function(){return this.$store.getters["events/eventById"](parseInt(this.$route.params.id))},event_rounds:function(){return this.event.rounds.map((function(e){var t=e.ord+". "+e.label+" ("+e.course_name+")",n=!e.is_open;return Object.assign({},e,{text:t,disabled:n})}))},end_view_pager:{get:function(){return this.end_view+1},set:function(e){this.end_view=e-1}}}),methods:{get_course:function(e){var t=this;this.$store.dispatch("courses/getCourses",e).then((function(){t.course=t.courses.find((function(t){return t.id===e}))}))},get_scorecards:function(e,t){var n=this;null===this.user_group.id&&(this.user_group=this.p_user[0]),this.$store.dispatch("events/resetScoreCardsUserGroup"),this.end_view=this.user_group.group_target-1,this.currentRound=t,this.scorecards_loading=!0,this.$store.dispatch("events/getScoreCardsUserGroup",{eId:e,rId:t,pId:this.user_group.id}).then((function(){n.scorecards_loading=!1,n.$nextTick((function(){n.$refs.end[n.end_view].isActive=!0}))})).catch((function(e){n.scorecards_loading=!1,"ECONNABORTED"===e.code&&(n.snack=!0,n.snackColor="error",n.snackText="Operation timed out. Try again in few seconds.")}))},update_end_view:function(e){"+"===e?this.end_view++:this.end_view--}}},et=Ze,tt=(n("9dda"),n("ce7e")),nt=(n("17b3"),n("9d26")),rt=n("dc22"),it=n("de2c"),st=Object(ae["a"])(pe["a"],Object(it["a"])({onVisible:["init"]}),ne["a"]).extend({name:"v-pagination",directives:{Resize:rt["a"]},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:function(e){return e%1===0}},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0}},data:function(){return{maxButtons:0,selected:null}},computed:{classes:function(){return Object(s["a"])({"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled},this.themeClasses)},items:function(){var e=parseInt(this.totalVisible,10),t=Math.min(Math.max(0,e)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=t)return this.range(1,this.length);var n=t%2===0?1:0,r=Math.floor(t/2),i=this.length-r+1+n;if(this.value>r&&this.value<i){var s=this.value-r+2,a=this.value+r-2-n;return[1,"..."].concat(Object(d["a"])(this.range(s,a)),["...",this.length])}if(this.value===r){var o=this.value+r-1-n;return[].concat(Object(d["a"])(this.range(1,o)),["...",this.length])}if(this.value===i){var c=this.value-r+1;return[1,"..."].concat(Object(d["a"])(this.range(c,this.length)))}return[].concat(Object(d["a"])(this.range(1,r)),["..."],Object(d["a"])(this.range(i,this.length)))}},watch:{value:function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.selected=null,this.$nextTick(this.onResize),setTimeout((function(){return e.selected=e.value}),100)},onResize:function(){var e=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((e-96)/42)},next:function(e){e.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous:function(e){e.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range:function(e,t){var n=[];e=e>0?e:1;for(var r=e;r<=t;r++)n.push(r);return n},genIcon:function(e,t,n,r){return e("li",[e("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":n},attrs:{type:"button"},on:n?{}:{click:r}},[e(nt["a"],[t])])])},genItem:function(e,t){var n=this,r=t===this.value&&(this.color||"primary");return e("button",this.setBackgroundColor(r,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":t===this.value},attrs:{type:"button"},on:{click:function(){return n.$emit("input",t)}}}),[t.toString()])},genItems:function(e){var t=this;return this.items.map((function(n,r){return e("li",{key:r},[isNaN(Number(n))?e("span",{class:"v-pagination__more"},[n.toString()]):t.genItem(e,n)])}))}},render:function(e){var t=[this.genIcon(e,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous),this.genItems(e),this.genIcon(e,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next)];return e("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},t)}}),at=(n("c740"),n("13b3"),n("c3f0")),ot=n("604c"),ct=ot["a"].extend({name:"v-window",provide:function(){return{windowGroup:this}},directives:{Touch:at["a"]},props:{activeClass:{type:String,default:"v-window-item--active"},continuous:Boolean,mandatory:{type:Boolean,default:!0},nextIcon:{type:[Boolean,String],default:"$next"},prevIcon:{type:[Boolean,String],default:"$prev"},reverse:{type:Boolean,default:void 0},showArrows:Boolean,showArrowsOnHover:Boolean,touch:Object,touchless:Boolean,value:{required:!1},vertical:Boolean},data:function(){return{changedByDelimiters:!1,internalHeight:void 0,transitionHeight:void 0,transitionCount:0,isBooted:!1,isReverse:!1}},computed:{isActive:function(){return this.transitionCount>0},classes:function(){return Object(s["a"])(Object(s["a"])({},ot["a"].options.computed.classes.call(this)),{},{"v-window--show-arrows-on-hover":this.showArrowsOnHover})},computedTransition:function(){if(!this.isBooted)return"";var e=this.vertical?"y":"x",t=this.$vuetify.rtl&&"x"===e?!this.internalReverse:this.internalReverse,n=t?"-reverse":"";return"v-window-".concat(e).concat(n,"-transition")},hasActiveItems:function(){return Boolean(this.items.find((function(e){return!e.disabled})))},hasNext:function(){return this.continuous||this.internalIndex<this.items.length-1},hasPrev:function(){return this.continuous||this.internalIndex>0},internalIndex:function(){var e=this;return this.items.findIndex((function(t,n){return e.internalValue===e.getValue(t,n)}))},internalReverse:function(){return this.reverse?!this.isReverse:this.isReverse}},watch:{internalIndex:"updateReverse"},mounted:function(){var e=this;window.requestAnimationFrame((function(){return e.isBooted=!0}))},methods:{genContainer:function(){var e=[this.$slots.default];return this.showArrows&&e.push(this.genControlIcons()),this.$createElement("div",{staticClass:"v-window__container",class:{"v-window__container--is-active":this.isActive},style:{height:this.internalHeight||this.transitionHeight}},e)},genIcon:function(e,t,n){var r=this;return this.$createElement("div",{staticClass:"v-window__".concat(e)},[this.$createElement(ie["a"],{props:{icon:!0},attrs:{"aria-label":this.$vuetify.lang.t("$vuetify.carousel.".concat(e))},on:{click:function(){r.changedByDelimiters=!0,n()}}},[this.$createElement(nt["a"],{props:{large:!0}},t)])])},genControlIcons:function(){var e=[],t=this.$vuetify.rtl?this.nextIcon:this.prevIcon;if(this.hasPrev&&t&&"string"===typeof t){var n=this.genIcon("prev",t,this.prev);n&&e.push(n)}var r=this.$vuetify.rtl?this.prevIcon:this.nextIcon;if(this.hasNext&&r&&"string"===typeof r){var i=this.genIcon("next",r,this.next);i&&e.push(i)}return e},getNextIndex:function(e){var t=(e+1)%this.items.length,n=this.items[t];return n.disabled?this.getNextIndex(t):t},getPrevIndex:function(e){var t=(e+this.items.length-1)%this.items.length,n=this.items[t];return n.disabled?this.getPrevIndex(t):t},next:function(){if(this.isReverse=this.$vuetify.rtl,this.hasActiveItems&&this.hasNext){var e=this.getNextIndex(this.internalIndex),t=this.items[e];this.internalValue=this.getValue(t,e)}},prev:function(){if(this.isReverse=!this.$vuetify.rtl,this.hasActiveItems&&this.hasPrev){var e=this.getPrevIndex(this.internalIndex),t=this.items[e];this.internalValue=this.getValue(t,e)}},updateReverse:function(e,t){this.changedByDelimiters?this.changedByDelimiters=!1:this.isReverse=e<t}},render:function(e){var t=this,n={staticClass:"v-window",class:this.classes,directives:[]};if(!this.touchless){var r=this.touch||{left:function(){t.$vuetify.rtl?t.prev():t.next()},right:function(){t.$vuetify.rtl?t.next():t.prev()},end:function(e){e.stopPropagation()},start:function(e){e.stopPropagation()}};n.directives.push({name:"touch",value:r})}return e("div",n,[this.genContainer()])}}),lt=n("9d65"),ut=n("4e82"),dt=Object(ae["a"])(lt["a"],Object(ut["a"])("windowGroup","v-window-item","v-window")),vt=dt.extend().extend().extend({name:"v-window-item",directives:{Touch:at["a"]},props:{disabled:Boolean,reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},value:{required:!1}},data:function(){return{isActive:!1,inTransition:!1}},computed:{classes:function(){return this.groupClasses},computedTransition:function(){return this.windowGroup.internalReverse?"undefined"!==typeof this.reverseTransition?this.reverseTransition||"":this.windowGroup.computedTransition:"undefined"!==typeof this.transition?this.transition||"":this.windowGroup.computedTransition}},methods:{genDefaultSlot:function(){return this.$slots.default},genWindowItem:function(){return this.$createElement("div",{staticClass:"v-window-item",class:this.classes,directives:[{name:"show",value:this.isActive}],on:this.$listeners},this.genDefaultSlot())},onAfterTransition:function(){this.inTransition&&(this.inTransition=!1,this.windowGroup.transitionCount>0&&(this.windowGroup.transitionCount--,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=void 0)))},onBeforeTransition:function(){this.inTransition||(this.inTransition=!0,0===this.windowGroup.transitionCount&&(this.windowGroup.transitionHeight=Object(re["g"])(this.windowGroup.$el.clientHeight)),this.windowGroup.transitionCount++)},onTransitionCancelled:function(){this.onAfterTransition()},onEnter:function(e){var t=this;this.inTransition&&this.$nextTick((function(){t.computedTransition&&t.inTransition&&(t.windowGroup.transitionHeight=Object(re["g"])(e.clientHeight))}))}},render:function(e){var t=this;return e("transition",{props:{name:this.computedTransition},on:{beforeEnter:this.onBeforeTransition,afterEnter:this.onAfterTransition,enterCancelled:this.onTransitionCancelled,beforeLeave:this.onBeforeTransition,afterLeave:this.onAfterTransition,leaveCancelled:this.onTransitionCancelled,enter:this.onEnter}},this.showLazyContent((function(){return[t.genWindowItem()]})))}}),ht=Object(p["a"])(et,ze,Ke,!1,null,"e29a37cc",null),pt=ht.exports;f()(ht,{VBtn:g["a"],VCard:b["a"],VCardTitle:w["d"],VDivider:tt["a"],VPagination:st,VProgressCircular:W["a"],VSelect:q["a"],VSheet:he["a"],VSnackbar:ge,VSpacer:T["a"],VWindow:ct,VWindowItem:vt});var _t={components:{eventParticipantList:xe,eventResults:Ue,eventScoring:pt},props:{action:String},data:function(){return{tab:null}},watch:{tab:{handler:function(){1===this.tab&&this.$store.dispatch("events/updateEvent",parseInt(this.$route.params.id))}}},computed:Object(s["a"])(Object(s["a"])({},Object(c["c"])({user:function(e){return e.user.user},courses:function(e){return e.courses.courses}})),{},{event:function(){return this.$store.getters["events/eventById"](parseInt(this.$route.params.id))},tabs:function(){return this.event&&this.event.archive?["Overview","Results"]:["Overview","Results","Scoring"]},p_user:function(){var e=this,t=null;return Array.isArray(this.event.participants)&&(t=this.event.participants.filter((function(t){return t.archer.id===e.user.archer.id}))),t||null},event_desciption:function(){return this.event.description.split("\n").join("</p><p>")}}),created:function(){var e=this;this.$store.dispatch("events/updateEvent",parseInt(this.$route.params.id)).catch((function(){e.$router.push("/events")})),"register"===this.action&&(this.tab=0)}},ft=_t,mt=n("a797"),gt=(n("c975"),n("5319"),n("1c87")),bt=Object(ae["a"])(gt["a"],Object(ut["a"])("tabsBar"),ne["a"]),wt=bt.extend().extend().extend({name:"v-tab",props:{ripple:{type:[Boolean,Object],default:!0}},data:function(){return{proxyClass:"v-tab--active"}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({"v-tab":!0},gt["a"].options.computed.classes.call(this)),{},{"v-tab--disabled":this.disabled},this.groupClasses)},value:function(){var e=this.to||this.href||"";if(this.$router&&this.to===Object(this.to)){var t=this.$router.resolve(this.to,this.$route,this.append);e=t.href}return e.replace("#","")}},mounted:function(){this.onRouteChange()},methods:{click:function(e){this.href&&this.href.indexOf("#")>-1&&e.preventDefault(),e.detail&&this.$el.blur(),this.$emit("click",e),this.to||this.toggle()}},render:function(e){var t=this,n=this.generateRouteLink(),r=n.tag,i=n.data;return i.attrs=Object(s["a"])(Object(s["a"])({},i.attrs),{},{"aria-selected":String(this.isActive),role:"tab",tabindex:0}),i.on=Object(s["a"])(Object(s["a"])({},i.on),{},{keydown:function(e){e.keyCode===re["w"].enter&&t.click(e),t.$emit("keydown",e)}}),e(r,i,this.$slots.default)}}),xt=vt.extend({name:"v-tab-item",props:{id:String},methods:{genWindowItem:function(){var e=vt.options.methods.genWindowItem.call(this);return e.data.domProps=e.data.domProps||{},e.data.domProps.id=this.id||this.value,e}}}),kt=(n("1bfb"),n("608c"),n("0789")),yt=Object(ae["a"])(ot["a"]).extend({name:"base-slide-group",directives:{Resize:rt["a"],Touch:at["a"]},props:{activeClass:{type:String,default:"v-slide-item--active"},centerActive:Boolean,nextIcon:{type:String,default:"$next"},mobileBreakPoint:{type:[Number,String],default:1264,validator:function(e){return!isNaN(parseInt(e))}},prevIcon:{type:String,default:"$prev"},showArrows:Boolean},data:function(){return{internalItemsLength:0,isOverflowing:!1,resizeTimeout:0,startX:0,scrollOffset:0,widths:{content:0,wrapper:0}}},computed:{__cachedNext:function(){return this.genTransition("next")},__cachedPrev:function(){return this.genTransition("prev")},classes:function(){return Object(s["a"])(Object(s["a"])({},ot["a"].options.computed.classes.call(this)),{},{"v-slide-group":!0,"v-slide-group--has-affixes":this.hasAffixes,"v-slide-group--is-overflowing":this.isOverflowing})},hasAffixes:function(){return(this.showArrows||!this.isMobile)&&this.isOverflowing},hasNext:function(){if(!this.hasAffixes)return!1;var e=this.widths,t=e.content,n=e.wrapper;return t>Math.abs(this.scrollOffset)+n},hasPrev:function(){return this.hasAffixes&&0!==this.scrollOffset},isMobile:function(){return this.$vuetify.breakpoint.width<this.mobileBreakPoint}},watch:{internalValue:"setWidths",isOverflowing:"setWidths",scrollOffset:function(e){this.$refs.content.style.transform="translateX(".concat(-e,"px)")}},beforeUpdate:function(){this.internalItemsLength=(this.$children||[]).length},updated:function(){this.internalItemsLength!==(this.$children||[]).length&&this.setWidths()},methods:{genNext:function(){var e=this,t=this.$scopedSlots.next?this.$scopedSlots.next({}):this.$slots.next||this.__cachedNext;return this.$createElement("div",{staticClass:"v-slide-group__next",class:{"v-slide-group__next--disabled":!this.hasNext},on:{click:function(){return e.onAffixClick("next")}},key:"next"},[t])},genContent:function(){return this.$createElement("div",{staticClass:"v-slide-group__content",ref:"content"},this.$slots.default)},genData:function(){return{class:this.classes,directives:[{name:"resize",value:this.onResize}]}},genIcon:function(e){var t=e;this.$vuetify.rtl&&"prev"===e?t="next":this.$vuetify.rtl&&"next"===e&&(t="prev");var n="".concat(e[0].toUpperCase()).concat(e.slice(1)),r=this["has".concat(n)];return this.showArrows||r?this.$createElement(nt["a"],{props:{disabled:!r}},this["".concat(t,"Icon")]):null},genPrev:function(){var e=this,t=this.$scopedSlots.prev?this.$scopedSlots.prev({}):this.$slots.prev||this.__cachedPrev;return this.$createElement("div",{staticClass:"v-slide-group__prev",class:{"v-slide-group__prev--disabled":!this.hasPrev},on:{click:function(){return e.onAffixClick("prev")}},key:"prev"},[t])},genTransition:function(e){return this.$createElement(kt["d"],[this.genIcon(e)])},genWrapper:function(){var e=this;return this.$createElement("div",{staticClass:"v-slide-group__wrapper",directives:[{name:"touch",value:{start:function(t){return e.overflowCheck(t,e.onTouchStart)},move:function(t){return e.overflowCheck(t,e.onTouchMove)},end:function(t){return e.overflowCheck(t,e.onTouchEnd)}}}],ref:"wrapper"},[this.genContent()])},calculateNewOffset:function(e,t,n,r){var i=n?-1:1,s=i*r+("prev"===e?-1:1)*t.wrapper;return i*Math.max(Math.min(s,t.content-t.wrapper),0)},onAffixClick:function(e){this.$emit("click:".concat(e)),this.scrollTo(e)},onResize:function(){this._isDestroyed||this.setWidths()},onTouchStart:function(e){var t=this.$refs.content;this.startX=this.scrollOffset+e.touchstartX,t.style.setProperty("transition","none"),t.style.setProperty("willChange","transform")},onTouchMove:function(e){this.scrollOffset=this.startX-e.touchmoveX},onTouchEnd:function(){var e=this.$refs,t=e.content,n=e.wrapper,r=t.clientWidth-n.clientWidth;t.style.setProperty("transition",null),t.style.setProperty("willChange",null),this.$vuetify.rtl?this.scrollOffset>0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset<=-r&&(this.scrollOffset=-r):this.scrollOffset<0||!this.isOverflowing?this.scrollOffset=0:this.scrollOffset>=r&&(this.scrollOffset=r)},overflowCheck:function(e,t){e.stopPropagation(),this.isOverflowing&&t(e)},scrollIntoView:function(){this.selectedItem&&(0===this.selectedIndex||!this.centerActive&&!this.isOverflowing?this.scrollOffset=0:this.centerActive?this.scrollOffset=this.calculateCenteredOffset(this.selectedItem.$el,this.widths,this.$vuetify.rtl):this.isOverflowing&&(this.scrollOffset=this.calculateUpdatedOffset(this.selectedItem.$el,this.widths,this.$vuetify.rtl,this.scrollOffset)))},calculateUpdatedOffset:function(e,t,n,r){var i=e.clientWidth,s=n?t.content-e.offsetLeft-i:e.offsetLeft;n&&(r=-r);var a=t.wrapper+r,o=i+s,c=.4*i;return s<r?r=Math.max(s-c,0):a<o&&(r=Math.min(r-(a-o-c),t.content-t.wrapper)),n?-r:r},calculateCenteredOffset:function(e,t,n){var r=e.offsetLeft,i=e.clientWidth;if(n){var s=t.content-r-i/2-t.wrapper/2;return-Math.min(t.content-t.wrapper,Math.max(0,s))}var a=r+i/2-t.wrapper/2;return Math.min(t.content-t.wrapper,Math.max(0,a))},scrollTo:function(e){this.scrollOffset=this.calculateNewOffset(e,{content:this.$refs.content?this.$refs.content.clientWidth:0,wrapper:this.$refs.wrapper?this.$refs.wrapper.clientWidth:0},this.$vuetify.rtl,this.scrollOffset)},setWidths:function(){var e=this;window.requestAnimationFrame((function(){var t=e.$refs,n=t.content,r=t.wrapper;e.widths={content:n?n.clientWidth:0,wrapper:r?r.clientWidth:0},e.isOverflowing=e.widths.wrapper<e.widths.content,e.scrollIntoView()}))}},render:function(e){return e("div",this.genData(),[this.genPrev(),this.genWrapper(),this.genNext()])}}),Ct=(yt.extend({name:"v-slide-group",provide:function(){return{slideGroup:this}}}),n("d10f")),Ot=Object(ae["a"])(yt,Ct["a"],ne["a"]).extend({name:"v-tabs-bar",provide:function(){return{tabsBar:this}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({},yt.options.computed.classes.call(this)),{},{"v-tabs-bar":!0,"v-tabs-bar--is-mobile":this.isMobile,"v-tabs-bar--show-arrows":this.showArrows},this.themeClasses)}},watch:{items:"callSlider",internalValue:"callSlider",$route:"onRouteChange"},methods:{callSlider:function(){this.isBooted&&this.$emit("call:slider")},genContent:function(){var e=yt.options.methods.genContent.call(this);return e.data=e.data||{},e.data.staticClass+=" v-tabs-bar__content",e},onRouteChange:function(e,t){if(!this.mandatory){var n,r=this.items,i=e.path,s=t.path,a=!1,o=!1,c=Object($e["a"])(r);try{for(c.s();!(n=c.n()).done;){var l=n.value;if(l.to===i?a=!0:l.to===s&&(o=!0),a&&o)break}}catch(u){c.e(u)}finally{c.f()}!a&&o&&(this.internalValue=void 0)}}},render:function(e){var t=yt.options.render.call(this,e);return t.data.attrs={role:"tablist"},t}}),$t=ct.extend({name:"v-tabs-items",props:{mandatory:{type:Boolean,default:!1}},computed:{classes:function(){return Object(s["a"])(Object(s["a"])({},ct.options.computed.classes.call(this)),{},{"v-tabs-items":!0})},isDark:function(){return this.rootIsDark}},methods:{getValue:function(e,t){return e.id||ot["a"].options.methods.getValue.call(this,e,t)}}}),Tt=Object(ae["a"])(pe["a"]).extend({name:"v-tabs-slider",render:function(e){return e("div",this.setBackgroundColor(this.color,{staticClass:"v-tabs-slider"}))}}),Et=n("a452"),It=Object(ae["a"])(pe["a"],Et["a"],ne["a"]),At=It.extend().extend({name:"v-tabs",directives:{Resize:rt["a"]},props:{activeClass:{type:String,default:""},alignWithTitle:Boolean,backgroundColor:String,centerActive:Boolean,centered:Boolean,fixedTabs:Boolean,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,iconsAndText:Boolean,mobileBreakPoint:{type:[Number,String],default:1264},nextIcon:{type:String,default:"$next"},optional:Boolean,prevIcon:{type:String,default:"$prev"},right:Boolean,showArrows:Boolean,sliderColor:String,sliderSize:{type:[Number,String],default:2},vertical:Boolean},data:function(){return{resizeTimeout:0,slider:{height:null,left:null,right:null,top:null,width:null},transitionTime:300}},computed:{classes:function(){return Object(s["a"])({"v-tabs--align-with-title":this.alignWithTitle,"v-tabs--centered":this.centered,"v-tabs--fixed-tabs":this.fixedTabs,"v-tabs--grow":this.grow,"v-tabs--icons-and-text":this.iconsAndText,"v-tabs--right":this.right,"v-tabs--vertical":this.vertical},this.themeClasses)},isReversed:function(){return this.$vuetify.rtl&&this.vertical},sliderStyles:function(){return{height:Object(re["g"])(this.slider.height),left:this.isReversed?void 0:Object(re["g"])(this.slider.left),right:this.isReversed?Object(re["g"])(this.slider.right):void 0,top:this.vertical?Object(re["g"])(this.slider.top):void 0,transition:null!=this.slider.left?null:"none",width:Object(re["g"])(this.slider.width)}},computedColor:function(){return this.color?this.color:this.isDark&&!this.appIsDark?"white":"primary"}},watch:{alignWithTitle:"callSlider",centered:"callSlider",centerActive:"callSlider",fixedTabs:"callSlider",grow:"callSlider",right:"callSlider",showArrows:"callSlider",vertical:"callSlider","$vuetify.application.left":"onResize","$vuetify.application.right":"onResize","$vuetify.rtl":"onResize"},mounted:function(){var e=this;this.$nextTick((function(){window.setTimeout(e.callSlider,30)}))},methods:{callSlider:function(){var e=this;return!this.hideSlider&&this.$refs.items&&this.$refs.items.selectedItems.length?(this.$nextTick((function(){var t=e.$refs.items.selectedItems[0];if(!t||!t.$el)return e.slider.width=0,void(e.slider.left=0);var n=t.$el;e.slider={height:e.vertical?n.scrollHeight:Number(e.sliderSize),left:e.vertical?0:n.offsetLeft,right:e.vertical?0:n.offsetLeft+n.offsetWidth,top:n.offsetTop,width:e.vertical?Number(e.sliderSize):n.scrollWidth}})),!0):(this.slider.width=0,!1)},genBar:function(e,t){var n=this,r={style:{height:Object(re["g"])(this.height)},props:{activeClass:this.activeClass,centerActive:this.centerActive,dark:this.dark,light:this.light,mandatory:!this.optional,mobileBreakPoint:this.mobileBreakPoint,nextIcon:this.nextIcon,prevIcon:this.prevIcon,showArrows:this.showArrows,value:this.internalValue},on:{"call:slider":this.callSlider,change:function(e){n.internalValue=e}},ref:"items"};return this.setTextColor(this.computedColor,r),this.setBackgroundColor(this.backgroundColor,r),this.$createElement(Ot,r,[this.genSlider(t),e])},genItems:function(e,t){var n=this;return e||(t.length?this.$createElement($t,{props:{value:this.internalValue},on:{change:function(e){n.internalValue=e}}},t):null)},genSlider:function(e){return this.hideSlider?null:(e||(e=this.$createElement(Tt,{props:{color:this.sliderColor}})),this.$createElement("div",{staticClass:"v-tabs-slider-wrapper",style:this.sliderStyles},[e]))},onResize:function(){this._isDestroyed||(clearTimeout(this.resizeTimeout),this.resizeTimeout=window.setTimeout(this.callSlider,0))},parseNodes:function(){for(var e=null,t=null,n=[],r=[],i=this.$slots.default||[],s=i.length,a=0;a<s;a++){var o=i[a];if(o.componentOptions)switch(o.componentOptions.Ctor.options.name){case"v-tabs-slider":t=o;break;case"v-tabs-items":e=o;break;case"v-tab-item":n.push(o);break;default:r.push(o)}else r.push(o)}return{tab:r,slider:t,items:e,item:n}}},render:function(e){var t=this.parseNodes(),n=t.tab,r=t.slider,i=t.items,s=t.item;return e("div",{staticClass:"v-tabs",class:this.classes,directives:[{name:"resize",modifiers:{quiet:!0},value:this.onResize}]},[this.genBar(n,r),this.genItems(i,s)])}}),Vt=Object(p["a"])(ft,r,i,!1,null,null,null);t["default"]=Vt.exports;f()(Vt,{VContainer:L["a"],VList:ce["a"],VListItem:le["a"],VListItemTitle:de["c"],VOverlay:mt["a"],VProgressCircular:W["a"],VSheet:he["a"],VSubheader:be["a"],VTab:wt,VTabItem:xt,VTabs:At,VTabsItems:$t})},"9bff":function(e,t,n){"use strict";var r=n("2f0b"),i=n.n(r);i.a},"9dda":function(e,t,n){"use strict";var r=n("f0ff"),i=n.n(r);i.a},b684:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("7db0"),core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_find__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_1__),_services_rankingService__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("a676");__webpack_exports__["a"]={props:{round:Object},data:function(){return{currentFocus:null,arrow_inc:0}},watch:{round:function(){this.currentFocus=null}},methods:{sc_eval:function sc_eval(arr,x){var scores_choices=eval(arr).map((function(e){return{text:e,value:e}}));return x&&scores_choices.unshift({text:"X",value:scores_choices[0].value}),scores_choices.push({text:"M",value:0}),scores_choices},enter_score:function(e){var t=this;if(this.currentFocus){var n=this.round.sc.arrows.find((function(e){return e.id===t.currentFocus.aId}));n.x="X"===e.text,n.score=e.value,n.loading="warning",this.$store.dispatch("events/putArrowEdit",{eId:parseInt(this.$route.params.id),pId:this.round.sc.participant,scId:this.round.sc.id,arrow:n}),this.$refs.arrow[this.arrow_inc].blur()}else this.arrow_inc=this.$refs.arrow.length+1;this.arrow_inc++,this.arrow_inc>=this.$refs.arrow.length?this.currentFocus=!1:this.$nextTick((function(){t.$refs.arrow[t.arrow_inc].focus()}))},end_score:function(e){return _services_rankingService__WEBPACK_IMPORTED_MODULE_2__["a"].sum(e.map((function(e){return e.score})))}}}},c071:function(e,t,n){"use strict";var r=n("fc21"),i=n.n(r);i.a},c79c:function(e,t,n){},c8c6:function(e,t,n){},ca71:function(e,t,n){},cd9c:function(e,t,n){},e39a:function(e,t,n){"use strict";var r=n("cd9c"),i=n.n(r);i.a},f0ff:function(e,t,n){},fc21:function(e,t,n){},fcb1:function(e,t,n){"use strict";var r=n("c8c6"),i=n.n(r);i.a}}]);
//# sourceMappingURL=chunk-290e154b.b084fd20.js.map