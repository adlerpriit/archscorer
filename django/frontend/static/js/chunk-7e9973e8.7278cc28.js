(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e9973e8"],{"74c6":function(t,s,a){"use strict";a.r(s);var e=function(){var t=this,s=t.$createElement,a=t._self._c||s;return t.s?a("v-container",[a("v-layout",{attrs:{"text-center":"",wrap:""}},[a("v-card",[a("v-card-title",{domProps:{textContent:t._s(t.s.name)}}),a("v-card-text",[a("p",{domProps:{textContent:t._s(t.s.description)}})]),a("seriesSummary")],1)],1)],1):a("v-overlay",[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)},r=[],n=a("5530"),i=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("v-sheet",[a("v-card",{staticClass:"mb-5"},[a("v-card-title",[a("small",[t._v("Archers Summary")]),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:t.s_search,callback:function(s){t.s_search=s},expression:"s_search"}})],1),a("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.s_table_header,items:t.s_table,search:t.s_search,loading:t.loading,"group-by":"class","multi-sort":"","items-per-page":50}})],1),t.s.club_ranking?a("v-card",[a("v-card-title",[a("small",[t._v("Clubs Summary")]),a("v-spacer")],1),a("v-data-table",{attrs:{"mobile-breakpoint":300,dense:"",headers:t.c_table_header,items:t.c_table,loading:t.loading,"multi-sort":"","items-per-page":15}})],1):t._e()],1)},u=[],c=(a("99af"),a("4de4"),a("7db0"),a("c740"),a("c975"),a("d81d"),a("13d5"),a("fb6a"),a("a434"),a("b0c0"),a("4ec9"),a("d3b7"),a("07ac"),a("ac1f"),a("25f0"),a("3ca3"),a("841c"),a("1276"),a("ddb0"),a("2909")),l=a("b85c"),o=a("a676"),p=a("2f62");function f(t,s){return s&&-1!==s.search(t.age_group+"_"+t.style)?t.age_group+"_"+t.style:t.age_group+t.archer.gender+t.style}var d={components:{},data:function(){return{s_search:""}},computed:Object(n["a"])(Object(n["a"])({},Object(p["d"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))},loading:function(){if(this.s_table.length)return!1;if(this.s){var t,s=Object(l["a"])(this.s.stages);try{for(s.s();!(t=s.n()).done;){var a=t.value;if(Array.isArray(a.participants))return!1}}catch(e){s.e(e)}finally{s.f()}}return!0},s_table_header:function(){if(this.s){var t=[{text:"Class",value:"class"},{text:"Place",value:"place",width:"1%"},{text:"Name",value:"name",width:"148px"},{text:"Club",value:"club"},{text:"Points",value:"points"},{text:"Sum",value:"sum"}];return t.push.apply(t,Object(c["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},c_table_header:function(){if(this.s_table&&this.s.club_ranking){var t=[{text:"Place",value:"place",width:"1%"},{text:"Club",value:"club"},{text:"Points",value:"points"}];return t.push.apply(t,Object(c["a"])(this.s.stages.map((function(t){return{text:t.name,value:"stage"+t.id.toString(),class:"stage-header"}})).reverse())),t}return[]},s_table:function(){var t=this;if(this.s){var s,a=[],e=Object(l["a"])(this.s.stages);try{var r=function(){var e=s.value;if(!Array.isArray(e.participants))return"continue";var r=e.participants.map((function(s){var a,r,n=e.rounds.find((function(t){return"s"===t.course_type}));return n=n?n.id:null,{name:s.archer.full_name,class:f(s,t.s.ignore_gender),id:s.archer.id+s.age_group+s.style,club:s.archer.club,sum:o["a"].sum((a=[]).concat.apply(a,Object(c["a"])(s.scorecards.filter((function(t){return t.round!==n})).map((function(t){return Object(c["a"])(t.arrows.map((function(t){return t.score})))}))))),x:o["a"].sum((r=[]).concat.apply(r,Object(c["a"])(s.scorecards.filter((function(t){return t.round!==n})).map((function(t){return Object(c["a"])(t.arrows.map((function(t){return t.x})))}))))),shootoff:n?o["a"].sum.apply(o["a"],Object(c["a"])(s.scorecards.filter((function(t){return t.round===n})).map((function(t){return Object(c["a"])(t.arrows.map((function(t){return t.score})))})))):null}}));o["a"].participantRank(r);var n,i=r.reduce((function(t,s){return t.set(s.class,(t.get(s.class)||0)+1)}),new Map),u={class:null,points:null},p=Object(l["a"])(r.filter((function(t){return t.sum>0})));try{var d=function(){var s=n.value;s.class!==u.class&&(u.class=s.class,u.points=Math.min(t.s.points_max,i.get(s.class))),s.points=u.points>=s.place&&s.sum>0?u.points-s.place+1:0;var r=a.findIndex((function(t){return t.id===s.id}));-1===r?(a.push({id:s.id,class:s.class,name:s.name,club:s.club,sum:[s.sum],points:[s.points]}),a[a.length-1]["stage"+e.id.toString()]=(s.points>0?s.points:"-")+" ("+s.sum+")"):(a[r].sum.push(s.sum),a[r].points.push(s.points),a[r]["stage"+e.id.toString()]=(s.points>0?s.points:"-")+" ("+s.sum+")")};for(p.s();!(n=p.n()).done;)d()}catch(m){p.e(m)}finally{p.f()}};for(e.s();!(s=e.n()).done;)r()}catch(p){e.e(p)}finally{e.f()}for(var n=function(){var s=u[i];s.sum.sort((function(t,a){return s.points[s.sum.indexOf(a)]-s.points[s.sum.indexOf(t)]})),s.points.sort((function(t,s){return s-t})),s.points.length>=t.s.participant_min&&(s.place=null),s.points.length>=t.s.participant_max?(s.points=o["a"].sum(s.points.slice(0,t.s.participant_max)),s.sum=o["a"].sum(s.sum.slice(0,t.s.participant_max))):(s.points=o["a"].sum(s.points),s.sum=o["a"].sum(s.sum))},i=0,u=a;i<u.length;i++)n();return a.sort((function(t,s){return t.class<s.class?-1:t.class>s.class||t.points<s.points?1:t.points>s.points?-1:t.sum<s.sum?1:t.sum>s.sum?-1:0})).map((function(s){return s.class!==t.class&&(t.class=s.class,t.ord=1,t.place=1,t.points=s.points,t.sum=s.sum),null===s.place&&s.points>0&&((s.points<t.points||s.sum<t.sum)&&(t.place=t.ord),s.place=t.place,t.ord+=1,t.sum=s.sum,t.points=s.points),0===s.points&&(s.points="-"),s}),{class:null,place:1,ord:1,sum:null,points:null}).sort((function(t,s){return t.class<s.class?-1:t.class>s.class||(t.place||9999)>(s.place||9999)?1:(t.place||9999)<(s.place||9999)?-1:0}))}return[]},c_table:function(){var t=this;if(this.s_table.length&&this.s.club_ranking){var s,a=[],e=Object(l["a"])(this.s.stages);try{for(e.s();!(s=e.n()).done;){var r,n=s.value,i="stage"+n.id.toString(),u={},c=Object(l["a"])(this.s_table);try{for(c.s();!(r=c.n()).done;){var p=r.value;if(p[i]){p.class in u||(u[p.class]={}),p.club in u[p.class]||(u[p.class][p.club]=[]);var f=parseInt(p[i].split(" ")[0])||0;u[p.class][p.club].push(f)}}}catch(g){c.e(g)}finally{c.f()}for(var d=0,m=Object.values(u);d<m.length;d++){var h=m[d],v=function(s){var e=0;e=h[s].length>t.s.club_ranking_max?o["a"].sum(h[s].sort((function(t,s){return s-t})).splice(0,t.s.club_ranking_max)):o["a"].sum(h[s]);var r=a.findIndex((function(t){return t.club===s}));-1===r?(a.push({club:s,place:null,points:e}),a[a.length-1][i]=e):(i in a[r]?a[r][i]+=e:a[r][i]=e,a[r].points+=e)};for(var b in h)v(b)}}}catch(g){e.e(g)}finally{e.f()}return a.sort((function(t,s){return t.points>s.points?-1:t.points<s.points?1:0})).map((function(s){return s.points<t.points&&(t.place=t.ord),s.place=t.place,t.points=s.points,t.ord+=1,s}),{place:1,ord:1,points:null})}return[]}}),methods:{}},m=d,h=a("2877"),v=a("6544"),b=a.n(v),g=a("b0af"),_=a("99d9"),x=a("8fea"),y=a("8dd9"),O=a("2fa4"),j=a("8654"),w=Object(h["a"])(m,i,u,!1,null,null,null),C=w.exports;b()(w,{VCard:g["a"],VCardTitle:_["d"],VDataTable:x["a"],VSheet:y["a"],VSpacer:O["a"],VTextField:j["a"]});var S={components:{seriesSummary:C},data:function(){return{}},computed:Object(n["a"])(Object(n["a"])({},Object(p["d"])({user:function(t){return t.user.user}})),{},{s:function(){return this.$store.getters["series/seriesById"](parseInt(this.$route.params.id))}}),created:function(){var t=this;this.$store.dispatch("series/updateSeries",parseInt(this.$route.params.id)).catch((function(){t.$router.push("/series")}))}},k=S,V=(a("8278"),a("a523")),$=a("a722"),I=a("a797"),A=a("490a"),P=Object(h["a"])(k,e,r,!1,null,null,null);s["default"]=P.exports;b()(P,{VCard:g["a"],VCardText:_["c"],VCardTitle:_["d"],VContainer:V["a"],VLayout:$["a"],VOverlay:I["a"],VProgressCircular:A["a"]})},"80a2":function(t,s,a){},8278:function(t,s,a){"use strict";var e=a("80a2"),r=a.n(e);r.a},a676:function(t,s,a){"use strict";a("13d5");var e=a("b85c");s["a"]={sum:function(t){return Array.isArray(t)&&t.length?t.reduce((function(t,s){return t+s})):null},participantOrder:function(t,s){if(t.class<s.class)return-1;if(t.class>s.class)return 1;if(t.sum>s.sum)return-1;if(t.sum<s.sum)return 1;if(t.shootoff&&s.shootoff){if(t.shootoff>s.shootoff)return-1;if(t.shootoff<s.shootoff)return 1}else{if(t.x>s.x)return-1;if(t.x<s.x)return 1}return 0},participantRank:function(t){var s,a={class:null,ord:1,sum:null,x:null},r=Object(e["a"])(t.sort(this.participantOrder));try{for(r.s();!(s=r.n()).done;){var n=s.value;n.class!==a.class&&(a.class=n.class,a.ord=1,a.place=1,a.sum=n.sum,a.x=n.x),(n.sum<a.sum||n.shootoff||n.x<a.x&&a.ord>3)&&(a.place=a.ord),n["place"]=a.place,a.x=n.x,a.sum=n.sum,a.ord+=1}}catch(i){r.e(i)}finally{r.f()}}}}}]);
//# sourceMappingURL=chunk-7e9973e8.7278cc28.js.map