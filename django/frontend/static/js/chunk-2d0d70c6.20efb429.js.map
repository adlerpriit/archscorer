{"version":3,"sources":["webpack:///./src/views/series/Series.vue?3e5b","webpack:///./src/components/series/seriesSummary.vue?e91f","webpack:///src/components/series/seriesSummary.vue","webpack:///./src/components/series/seriesSummary.vue?c53e","webpack:///./src/components/series/seriesSummary.vue","webpack:///src/views/series/Series.vue","webpack:///./src/views/series/Series.vue?c3f3","webpack:///./src/views/series/Series.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","domProps","_s","s","name","description","staticRenderFns","_v","model","value","callback","$$v","s_search","expression","s_table_header","s_table","so","id","p","archer","full_name","class","age_group","gender","style","club","sum","rankingService","x","shootoff","component","VCard","VCardTitle","VDataTable","VSpacer","VTextField","VCardText","VContainer","VLayout","VOverlay","VProgressCircular"],"mappings":"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","file":"static/js/chunk-2d0d70c6.20efb429.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.s)?_c('v-container',[_c('v-layout',{attrs:{\"text-center\":\"\",\"wrap\":\"\"}},[_c('v-card',[_c('v-card-title',{domProps:{\"textContent\":_vm._s(_vm.s.name)}}),_c('v-card-text',[_c('p',{domProps:{\"textContent\":_vm._s(_vm.s.description)}}),_c('seriesSummary')],1)],1)],1)],1):_c('v-overlay',[_c('v-progress-circular',{attrs:{\"indeterminate\":\"\",\"size\":\"64\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',[_c('v-card-title',[_c('small',[_vm._v(\"Summary Table\")]),_c('v-spacer'),_c('v-text-field',{attrs:{\"append-icon\":\"mdi-magnify\",\"label\":\"Search\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.s_search),callback:function ($$v) {_vm.s_search=$$v},expression:\"s_search\"}})],1),_c('v-data-table',{attrs:{\"mobile-breakpoint\":300,\"dense\":\"\",\"headers\":_vm.s_table_header,\"items\":_vm.s_table,\"search\":_vm.s_search,\"group-by\":\"class\",\"multi-sort\":\"\",\"items-per-page\":50}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-card>\n    <v-card-title>\n      <small>Summary Table</small>\n      <v-spacer />\n      <v-text-field\n        v-model=\"s_search\"\n        append-icon=\"mdi-magnify\"\n        label=\"Search\"\n        single-line\n        hide-details\n      ></v-text-field>\n    </v-card-title>\n    <v-data-table\n      :mobile-breakpoint=\"300\"\n      dense\n      :headers=\"s_table_header\"\n      :items=\"s_table\"\n      :search=\"s_search\"\n      group-by=\"class\"\n      multi-sort\n      :items-per-page=\"50\"\n    >\n    </v-data-table>\n  </v-card>\n</template>\n\n<script>\n  import rankingService from '@/services/rankingService'\n  import { mapState } from 'vuex'\n\n  export default {\n    // name: 'Series',\n    components: {\n    },\n    data: () => ({\n      s_search: '',\n    }),\n    computed: {\n      ...mapState({\n        user: state => state.user.user,\n      }),\n      s() {\n        return this.$store.getters['series/seriesById'](parseInt(this.$route.params.id))\n      },\n      s_table_header() {\n        if (this.s) {\n          let header = [\n            { text: 'Class', value: 'class' },\n            { text: 'Place', value: 'place', width: '1%' },\n            { text: 'Name', value: 'name' },\n            { text: 'Club', value: 'club' },\n            { text: 'Points', value: 'points'},\n            { text: 'Sum', value: 'sum' },\n          ]\n          header.push(...this.s.stages.map(function(stage, i) {\n            return { text: (i + 1).toString() + '. ' + stage.name,\n                    value: 'stage' + stage.id.toString() }\n          }))\n          return header\n        }\n        return []\n      },\n      s_table() {\n        if (this.s) {\n          let s_table = []\n          for (let stage of this.s.stages) {\n            // here before map should be filter to exclude participants who should not be in\n            // cup ranking (i.e for club cup, they dont have club that belongs to faae)\n            let p_table = stage.participants.map(p => {\n              // handle shootoff\n              let so = stage.rounds.find(obj => obj.course_name.search('shootoff') !== -1)\n              // get shootoff round id (if it exists) to test against in scorecard filtering\n              so = so ? so.id : null\n              return {\n                name: p.archer.full_name,\n                class: p.age_group + p.archer.gender + p.style,\n                id: p.archer.id + p.age_group + p.style,\n                club: p.archer.club,\n                sum: rankingService.sum(...p.scorecards.filter(obj => obj.round !== so).map(sc => [...sc.arrows.map(a => a.score)])),\n                x: rankingService.sum(...p.scorecards.filter(obj => obj.round !== so).map(sc => [...sc.arrows.map(a => a.x)])),\n                shootoff: so ? rankingService.sum(...p.scorecards.filter(obj => obj.round === so).map(sc => [...sc.arrows.map(a => a.score)])) : null,\n              }\n            })\n\n            rankingService.participantRank(p_table)\n            // Map solution to count classes in participant array\n            let class_counts = p_table.reduce((acc, e) => acc.set(e.class, (acc.get(e.class) || 0) + 1), new Map())\n            let points = {class: null, points: null}\n            for (let p of p_table) {\n              if (p.class !== points.class) {\n                points.class = p.class\n                points.points = Math.min(this.s.points_max, class_counts.get(p.class))\n              }\n              p.points = points.points - p.place + 1\n              let index = s_table.findIndex(obj => obj.id === p.id)\n              if (index === -1) {\n                s_table.push({\n                  id: p.id,\n                  class: p.class,\n                  name: p.name,\n                  club: p.club,\n                  sum: p.sum,\n                  points: p.points\n                })\n                s_table[s_table.length - 1]['stage' + stage.id.toString()] = [p.sum, p.points]\n              } else {\n                s_table[index].sum += p.sum\n                s_table[index].points += p.points\n                s_table[index]['stage' + stage.id.toString()] = [p.sum, p.points]\n              }\n            }\n          }\n          return s_table\n        }\n        return []\n      }\n    },\n    methods: {\n      //\n    },\n  }\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seriesSummary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./seriesSummary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./seriesSummary.vue?vue&type=template&id=7c58fb68&\"\nimport script from \"./seriesSummary.vue?vue&type=script&lang=js&\"\nexport * from \"./seriesSummary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VDataTable } from 'vuetify/lib/components/VDataTable';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCard,VCardTitle,VDataTable,VSpacer,VTextField})\n","<template>\n  <v-container v-if=\"s\">\n    <v-layout\n      text-center\n      wrap\n    >\n      <v-card>\n        <v-card-title v-text=\"s.name\"></v-card-title>\n        <v-card-text>\n          <p v-text=\"s.description\"></p>\n          <seriesSummary/>\n        </v-card-text>\n      </v-card>\n    </v-layout>\n  </v-container>\n  <v-overlay v-else>\n    <v-progress-circular indeterminate size=\"64\"></v-progress-circular>\n  </v-overlay>\n</template>\n\n<script>\n  import seriesSummary from '@/components/series/seriesSummary.vue'\n  import { mapState } from 'vuex'\n\n  export default {\n    // name: 'Event',\n    components: {\n      seriesSummary,\n    },\n    data: () => ({\n    }),\n    computed: {\n      ...mapState({\n        user: state => state.user.user,\n      }),\n      s() {\n        return this.$store.getters['series/seriesById'](parseInt(this.$route.params.id))\n      },\n    },\n    created() {\n      //do something after creating vue instance\n      this.$store.dispatch('series/updateSeries', parseInt(this.$route.params.id)).catch(() => {\n        this.$router.push('/series')\n      })\n    }\n  }\n</script>\n\n<style>\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Series.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Series.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Series.vue?vue&type=template&id=7f596c58&\"\nimport script from \"./Series.vue?vue&type=script&lang=js&\"\nexport * from \"./Series.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VLayout } from 'vuetify/lib/components/VGrid';\nimport { VOverlay } from 'vuetify/lib/components/VOverlay';\nimport { VProgressCircular } from 'vuetify/lib/components/VProgressCircular';\ninstallComponents(component, {VCard,VCardText,VCardTitle,VContainer,VLayout,VOverlay,VProgressCircular})\n"],"sourceRoot":""}